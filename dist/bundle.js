/******/ (function(modules) { // webpackBootstrap
/******/ 	// The module cache
/******/ 	var installedModules = {};
/******/
/******/ 	// The require function
/******/ 	function __webpack_require__(moduleId) {
/******/
/******/ 		// Check if module is in cache
/******/ 		if(installedModules[moduleId]) {
/******/ 			return installedModules[moduleId].exports;
/******/ 		}
/******/ 		// Create a new module (and put it into the cache)
/******/ 		var module = installedModules[moduleId] = {
/******/ 			i: moduleId,
/******/ 			l: false,
/******/ 			exports: {}
/******/ 		};
/******/
/******/ 		// Execute the module function
/******/ 		modules[moduleId].call(module.exports, module, module.exports, __webpack_require__);
/******/
/******/ 		// Flag the module as loaded
/******/ 		module.l = true;
/******/
/******/ 		// Return the exports of the module
/******/ 		return module.exports;
/******/ 	}
/******/
/******/
/******/ 	// expose the modules object (__webpack_modules__)
/******/ 	__webpack_require__.m = modules;
/******/
/******/ 	// expose the module cache
/******/ 	__webpack_require__.c = installedModules;
/******/
/******/ 	// define getter function for harmony exports
/******/ 	__webpack_require__.d = function(exports, name, getter) {
/******/ 		if(!__webpack_require__.o(exports, name)) {
/******/ 			Object.defineProperty(exports, name, { enumerable: true, get: getter });
/******/ 		}
/******/ 	};
/******/
/******/ 	// define __esModule on exports
/******/ 	__webpack_require__.r = function(exports) {
/******/ 		if(typeof Symbol !== 'undefined' && Symbol.toStringTag) {
/******/ 			Object.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });
/******/ 		}
/******/ 		Object.defineProperty(exports, '__esModule', { value: true });
/******/ 	};
/******/
/******/ 	// create a fake namespace object
/******/ 	// mode & 1: value is a module id, require it
/******/ 	// mode & 2: merge all properties of value into the ns
/******/ 	// mode & 4: return value when already ns object
/******/ 	// mode & 8|1: behave like require
/******/ 	__webpack_require__.t = function(value, mode) {
/******/ 		if(mode & 1) value = __webpack_require__(value);
/******/ 		if(mode & 8) return value;
/******/ 		if((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;
/******/ 		var ns = Object.create(null);
/******/ 		__webpack_require__.r(ns);
/******/ 		Object.defineProperty(ns, 'default', { enumerable: true, value: value });
/******/ 		if(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));
/******/ 		return ns;
/******/ 	};
/******/
/******/ 	// getDefaultExport function for compatibility with non-harmony modules
/******/ 	__webpack_require__.n = function(module) {
/******/ 		var getter = module && module.__esModule ?
/******/ 			function getDefault() { return module['default']; } :
/******/ 			function getModuleExports() { return module; };
/******/ 		__webpack_require__.d(getter, 'a', getter);
/******/ 		return getter;
/******/ 	};
/******/
/******/ 	// Object.prototype.hasOwnProperty.call
/******/ 	__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };
/******/
/******/ 	// __webpack_public_path__
/******/ 	__webpack_require__.p = "";
/******/
/******/
/******/ 	// Load entry module and return exports
/******/ 	return __webpack_require__(__webpack_require__.s = "./src/main.js");
/******/ })
/************************************************************************/
/******/ ({

/***/ "./src/js/board.js":
/*!*************************!*\
  !*** ./src/js/board.js ***!
  \*************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _bubble__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./bubble */ \"./src/js/bubble.js\");\n/* harmony import */ var _sound__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./sound */ \"./src/js/sound.js\");\n\n\n\nvar ADJ_DIFFS = [[[1, 0], [0, 1], [-1, 1], [-1, 0], [-1, -1], [0, -1]],\n                        [[1, 0], [1, 1], [0, 1], [-1, 0], [0, -1], [1, -1]]];\n\nvar levelColors = {\n    1: ['red', 'green', 'yellow'],\n    2: ['red', 'green', 'yellow', 'orange'],\n    3: ['red', 'green', 'yellow', 'orange', 'blue']\n}\n\nclass Board {\n    constructor(game, ctx, bananaTarget, movesAllowed) {\n        this.bubbles = [];\n        this.bubbleShooter = null;\n        this.nextShooterBubble = null;\n        this.ctx = ctx;\n        this.game = game;\n        this.bananaCount = 0;\n        this.rows = 5;\n        this.columns = 11;\n        this.bubbleDiameter = 40;\n        this.bubbleShooterX = 235;\n        this.bubbleShooterY = 570;\n        this.nextShooterX = 110;\n        this.nextShooterY = 580;\n        this.clusterCount = 0;\n        this.tempClusters = [];\n        this.foundClusters = [];\n        this.score = 0;\n        this.movesAllowed = movesAllowed || 15;\n        this.bananaTarget = bananaTarget || 5;\n        this.currentMoveCount = 0;\n        this.populate();\n        window.bubbles = this.bubbles;\n    }\n\n    loadGame() {\n        this.calculateScore();\n        this.drawScore();\n        this.drawMoveCount();\n        this.drawLevel();\n    }\n\n    populate() {\n        for(let i=0; i < this.rows; i++) {\n            this.bubbles[i] = [];\n            for(let j=0; j< this.columns; j++) {\n                let newBubble = new _bubble__WEBPACK_IMPORTED_MODULE_0__[\"default\"]('bubble',null, null, null, i , j);\n                let dim = newBubble.getBubbleDimensions(i, j);\n                newBubble.x = dim.x;\n                newBubble.y = dim.y;\n                this.bubbles[i].push(newBubble);\n            }\n        }\n        this.placeRandomBananas();\n    }\n\n    drawBubbles() {\n        for (let i = 0; i < this.bubbles.length; i++) {\n            for (let j = 0; j < this.columns; j++) {\n                if(this.bubbles[i][j] && this.bubbles[i][j].removed === false) {\n                    const bubble = this.bubbles[i][j];\n                    if(bubble.type === 'banana') {\n                        bubble.drawBanana(this.ctx);\n                        this.bananaCount += 1;\n                    } else {\n                        bubble.draw(this.ctx, this.game.image, levelColors[this.game.level]);\n                    }\n                }\n            }\n        }\n    }\n\n    drawBubbleShooter() {\n        if (!this.bubbleShooter) {\n            if (this.nextShooterBubble) {\n                this.bubbleShooter = this.nextShooterBubble;\n                this.bubbleShooter.x = this.bubbleShooterX;\n                this.bubbleShooter.y = this.bubbleShooterY;\n            } else {\n                this.bubbleShooter = new _bubble__WEBPACK_IMPORTED_MODULE_0__[\"default\"](\n                                            'shooter', \n                                            this.bubbleShooterX, \n                                            this.bubbleShooterY, \n                                            this.selectRandomBubble(this.rows - 1).color);\n            }\n            this.nextShooterBubble = new _bubble__WEBPACK_IMPORTED_MODULE_0__[\"default\"](\n                'shooter',\n                this.nextShooterX,\n                this.nextShooterY,\n                this.selectRandomBubble(this.rows - 1).color);\n            this.nextShooterBubble.draw(this.ctx, this.game.image);\n        }\n        this.bubbleShooter.draw(this.ctx, this.game.image);\n    }\n\n    drawMoveCount() {\n        document.getElementById(\"moves-val\").innerHTML = this.movesAllowed - this.currentMoveCount;\n    }\n\n    drawScore() {\n        document.getElementById(\"score-val\").innerHTML = this.score;\n    }\n\n    drawLevel() {\n        document.getElementById(\"level-val\").innerHTML = this.game.level;\n    }\n\n    calculateScore() {\n        let score = 0;\n        if (this.clusterCount > 2) {\n            score = this.clusterCount * 10;\n            if ((this.bananaTarget - this.bananaCount) > 0) {\n                score += ((this.bananaTarget - this.bananaCount) * 20);\n            }\n        }\n        this.score += score;\n    }\n\n    render() {\n        this.ctx.clearRect(0, 0, 640, 510);\n        this.drawBubbles();\n        this.drawMoveCount();\n        this.calculateScore();\n        this.drawScore();\n        this.drawLevel();\n    }\n\n    checkCollision() {\n        const shooterX = this.bubbleShooter.x;\n        const shooterY = this.bubbleShooter.y;\n        const allBubbles = this.bubbles.flat();\n        let collision = false;\n        for (let i = 0; i < allBubbles.length; i++) {\n            if (allBubbles[i].removed === false && this.checkTwoBubblesIntersection(allBubbles[i], { x: shooterX, y: shooterY })) {\n                collision = true;\n                break;\n            }\n        }\n        if (collision === true || shooterY === 70) {\n            this.setBubbleShooter();\n            this.resetBubbles();\n        }\n        return collision;\n    }\n\n    resetBubbles() {\n        this.removeAllMatchingBubbles(this.bubbleShooter);\n        if (this.clusterCount > 2) {\n            const bubbleSound = new _sound__WEBPACK_IMPORTED_MODULE_1__[\"default\"](\"assets/sounds/pop.mp3\");\n            bubbleSound.play();\n            this.markRemoved(this.tempClusters);\n            this.removeAllLooseBubbles();\n        }\n        this.render();\n    }\n\n    setBubbleShooter() {\n        const grid = this.getClosestValidPosition(this.bubbleShooter);\n        const dim = this.bubbleShooter.getBubbleDimensions(grid.row, grid.col);\n        const newBubble = new _bubble__WEBPACK_IMPORTED_MODULE_0__[\"default\"]('bubble', dim.x, dim.y, this.bubbleShooter.color, grid.row, grid.col);\n        this.bubbles[grid.row] = this.bubbles[grid.row] ? this.bubbles[grid.row] : [];\n        this.bubbles[grid.row][grid.col] = newBubble;\n        this.bubbleShooter = newBubble;\n    }\n\n    checkTwoBubblesIntersection(bubble1, bubble2) {\n        const dx = bubble1.x - bubble2.x;\n        const dy = bubble1.y - bubble2.y;\n        const distance = Math.sqrt(dx * dx + dy * dy);\n        if (distance < (this.bubbleDiameter)) {\n            return true;\n        }\n        return false;\n    }\n\n\n    getClosestValidPosition(bubble) {\n        const x = bubble.x;\n        const y = bubble.y;\n        const row = Math.floor((y) / this.bubbleDiameter);\n        const rowOffset = (row%2 === 1) ? this.bubbleDiameter/2 : 0;\n        const col = Math.floor((x - rowOffset) / this.bubbleDiameter);\n        let result = { row: row - 1, col };\n        if (this.bubbles[row - 1] && this.bubbles[row - 1][col] && this.bubbles[row-1][col].removed === false) {\n            result = this.getOtherPossiblePosition(row-1, col-1) || result;\n        }\n        return result;\n    }\n\n    getOtherPossiblePosition(currentRow, currentCol) {\n        const rowType = (currentRow) % 2;\n        const possibilities = ADJ_DIFFS[rowType];\n\n        for (let i = 0; i < possibilities.length; i++) {\n            const col = currentCol + possibilities[i][0];\n            const row = currentRow + possibilities[i][1];\n\n            if (col >= 0 && col < this.columns && row >= 0) {\n                if ((!this.bubbles[row]) || !this.bubbles[row][col] || \n                    (this.bubbles[row][col] && this.bubbles[row][col].removed === true)) {\n                    return {row, col};\n                }\n            }\n        }\n    }\n\n    getAllAdjacentBubbles(bubble) {\n        var rowType = (bubble.row) % 2;\n        var neighbors = [];\n        var possibilities = ADJ_DIFFS[rowType];\n        for (var i = 0; i < possibilities.length; i++) {\n            var col = bubble.col + possibilities[i][0];\n            var row = bubble.row + possibilities[i][1];\n\n            if (col >= 0 && col < this.columns && row >= 0 && row < this.bubbles.length) {\n                if (this.bubbles[row] && this.bubbles[row][col] && this.bubbles[row][col].removed === false) {\n                    neighbors.push(this.bubbles[row][col]);\n                }\n            }\n        }\n\n        return neighbors;\n    }\n\n    removeAllMatchingBubbles(targetBubble) {\n        this.tempClusters.push(targetBubble);\n        this.clusterCount += 1;\n        const rowType = (targetBubble.row) % 2;\n        const possibilities = ADJ_DIFFS[rowType];\n        for (let i = 0; i < possibilities.length; i++) {\n            const col = targetBubble.col + possibilities[i][0];\n            const row = targetBubble.row + possibilities[i][1];\n            if (col >= 0 && col < this.columns && row >= 0 && row < this.bubbles.length) {\n                if(this.bubbles[row] && this.bubbles[row][col]) {\n                    const adjBubble = this.bubbles[row][col];\n                    if ((adjBubble.type === 'banana' || (adjBubble.type != 'banana' && adjBubble.color === this.bubbleShooter.color)) \n                        && adjBubble.removed === false && !this.tempClusters.includes(adjBubble)) {\n                        this.removeAllMatchingBubbles(adjBubble);\n                    }\n                }\n            }\n        }\n    }\n\n    removeAllLooseBubbles() {\n        for (let i = this.bubbles.length - 1; i >= 0; i--) {\n            for (let j = 0; j < this.columns; j++) {\n                if (this.bubbles[i] && this.bubbles[i][j] && this.bubbles[i][j].removed === false) {\n                    const bubble = this.bubbles[i][j];\n                    if (!this.foundClusters.includes(`${bubble.row}-${bubble.col}`)) {\n                        this.findBubbleTree(bubble.row, bubble.col);\n                    }\n                }\n            }\n        }\n    }\n\n    //BFS using queue\n    findBubbleTree(row, col) {\n        let allNodes = [this.bubbles[row][col]];\n        let bubbleTree = [];\n        let processed = [];\n        let looseBubble = true;\n        while (allNodes.length > 0) {\n            const currentNode = allNodes.shift();\n            if (!processed.includes(currentNode)) {\n                processed.push(currentNode);\n                if (currentNode.row === 0) {\n                    looseBubble = false;\n                }\n                this.foundClusters.push(`${currentNode.row}-${currentNode.col}`);\n                allNodes = allNodes.concat(this.getAllAdjacentBubbles(currentNode));\n                bubbleTree.push(currentNode);\n            }\n        }\n        if (looseBubble) {\n            this.markRemoved(bubbleTree);\n        }\n        return bubbleTree;\n    }\n\n    markRemoved(bubbles) {\n        for(let i=0; i < bubbles.length; i++) {\n            this.bubbles[bubbles[i].row][bubbles[i].col].removed = true;\n        }\n    }\n\n    selectRandomBubble(rowStart = 0, rowEnd = this.rows, colStart = 0, colEnd = this.columns) {\n        const sampleData = this.getSelectedBubbles(rowStart, rowEnd, colStart, colEnd);\n        return sampleData[Math.floor(Math.random() * sampleData.length)];\n    }\n\n    getSelectedBubbles(rowStart = 0, rowEnd = this.rows, colStart = 0, colEnd = this.columns) {\n        let sampleData = [];\n        for (let i = rowStart; i < rowEnd; i++) {\n            for (let j = colStart; j < colEnd; j++) {\n                sampleData.push(this.bubbles[i][j]);\n            }\n        }\n        return sampleData;\n    }\n\n    placeRandomBananas() {\n        for (let i = 0; i < this.bananaTarget; i++) {\n            const bananaRow = Math.floor(Math.random() * (this.rows-1));\n            const bananaCol = Math.floor(Math.random() * this.columns);\n            const banana = new _bubble__WEBPACK_IMPORTED_MODULE_0__[\"default\"]('banana');\n            const dim = banana.getBubbleDimensions(bananaRow, bananaCol);\n            banana.x = dim.x;\n            banana.y = dim.y;\n            banana.row = bananaRow;\n            banana.col = bananaCol;\n            this.bubbles[bananaRow][bananaCol] = banana;\n        }\n    }\n}\n\n/* harmony default export */ __webpack_exports__[\"default\"] = (Board);//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvanMvYm9hcmQuanM/MzkwZiJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtBQUFBO0FBQUE7QUFBOEI7QUFDRjs7QUFFNUI7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLG9CQUFvQixlQUFlO0FBQ25DO0FBQ0Esd0JBQXdCLGlCQUFpQjtBQUN6QyxvQ0FBb0MsK0NBQU07QUFDMUM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLHVCQUF1Qix5QkFBeUI7QUFDaEQsMkJBQTJCLGtCQUFrQjtBQUM3QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EscUJBQXFCO0FBQ3JCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2IseUNBQXlDLCtDQUFNO0FBQy9DO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx5Q0FBeUMsK0NBQU07QUFDL0M7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx1QkFBdUIsdUJBQXVCO0FBQzlDLG9HQUFvRywyQkFBMkI7QUFDL0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0Esb0NBQW9DLDhDQUFLO0FBQ3pDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSw4QkFBOEIsK0NBQU07QUFDcEM7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxzQkFBc0I7QUFDdEI7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUEsdUJBQXVCLDBCQUEwQjtBQUNqRDtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLDRCQUE0QjtBQUM1QjtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHVCQUF1QiwwQkFBMEI7QUFDakQ7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsdUJBQXVCLDBCQUEwQjtBQUNqRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLDZDQUE2QyxRQUFRO0FBQ3JELDJCQUEyQixrQkFBa0I7QUFDN0M7QUFDQTtBQUNBLHdEQUF3RCxXQUFXLEdBQUcsV0FBVztBQUNqRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwyQ0FBMkMsZ0JBQWdCLEdBQUcsZ0JBQWdCO0FBQzlFO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLG9CQUFvQixvQkFBb0I7QUFDeEM7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSw4QkFBOEIsWUFBWTtBQUMxQyxrQ0FBa0MsWUFBWTtBQUM5QztBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0EsdUJBQXVCLHVCQUF1QjtBQUM5QztBQUNBO0FBQ0EsK0JBQStCLCtDQUFNO0FBQ3JDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFZSxvRUFBSyIsImZpbGUiOiIuL3NyYy9qcy9ib2FyZC5qcy5qcyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBCdWJibGUgZnJvbSAnLi9idWJibGUnO1xuaW1wb3J0IFNvdW5kIGZyb20gJy4vc291bmQnO1xuXG52YXIgQURKX0RJRkZTID0gW1tbMSwgMF0sIFswLCAxXSwgWy0xLCAxXSwgWy0xLCAwXSwgWy0xLCAtMV0sIFswLCAtMV1dLFxuICAgICAgICAgICAgICAgICAgICAgICAgW1sxLCAwXSwgWzEsIDFdLCBbMCwgMV0sIFstMSwgMF0sIFswLCAtMV0sIFsxLCAtMV1dXTtcblxudmFyIGxldmVsQ29sb3JzID0ge1xuICAgIDE6IFsncmVkJywgJ2dyZWVuJywgJ3llbGxvdyddLFxuICAgIDI6IFsncmVkJywgJ2dyZWVuJywgJ3llbGxvdycsICdvcmFuZ2UnXSxcbiAgICAzOiBbJ3JlZCcsICdncmVlbicsICd5ZWxsb3cnLCAnb3JhbmdlJywgJ2JsdWUnXVxufVxuXG5jbGFzcyBCb2FyZCB7XG4gICAgY29uc3RydWN0b3IoZ2FtZSwgY3R4LCBiYW5hbmFUYXJnZXQsIG1vdmVzQWxsb3dlZCkge1xuICAgICAgICB0aGlzLmJ1YmJsZXMgPSBbXTtcbiAgICAgICAgdGhpcy5idWJibGVTaG9vdGVyID0gbnVsbDtcbiAgICAgICAgdGhpcy5uZXh0U2hvb3RlckJ1YmJsZSA9IG51bGw7XG4gICAgICAgIHRoaXMuY3R4ID0gY3R4O1xuICAgICAgICB0aGlzLmdhbWUgPSBnYW1lO1xuICAgICAgICB0aGlzLmJhbmFuYUNvdW50ID0gMDtcbiAgICAgICAgdGhpcy5yb3dzID0gNTtcbiAgICAgICAgdGhpcy5jb2x1bW5zID0gMTE7XG4gICAgICAgIHRoaXMuYnViYmxlRGlhbWV0ZXIgPSA0MDtcbiAgICAgICAgdGhpcy5idWJibGVTaG9vdGVyWCA9IDIzNTtcbiAgICAgICAgdGhpcy5idWJibGVTaG9vdGVyWSA9IDU3MDtcbiAgICAgICAgdGhpcy5uZXh0U2hvb3RlclggPSAxMTA7XG4gICAgICAgIHRoaXMubmV4dFNob290ZXJZID0gNTgwO1xuICAgICAgICB0aGlzLmNsdXN0ZXJDb3VudCA9IDA7XG4gICAgICAgIHRoaXMudGVtcENsdXN0ZXJzID0gW107XG4gICAgICAgIHRoaXMuZm91bmRDbHVzdGVycyA9IFtdO1xuICAgICAgICB0aGlzLnNjb3JlID0gMDtcbiAgICAgICAgdGhpcy5tb3Zlc0FsbG93ZWQgPSBtb3Zlc0FsbG93ZWQgfHwgMTU7XG4gICAgICAgIHRoaXMuYmFuYW5hVGFyZ2V0ID0gYmFuYW5hVGFyZ2V0IHx8IDU7XG4gICAgICAgIHRoaXMuY3VycmVudE1vdmVDb3VudCA9IDA7XG4gICAgICAgIHRoaXMucG9wdWxhdGUoKTtcbiAgICAgICAgd2luZG93LmJ1YmJsZXMgPSB0aGlzLmJ1YmJsZXM7XG4gICAgfVxuXG4gICAgbG9hZEdhbWUoKSB7XG4gICAgICAgIHRoaXMuY2FsY3VsYXRlU2NvcmUoKTtcbiAgICAgICAgdGhpcy5kcmF3U2NvcmUoKTtcbiAgICAgICAgdGhpcy5kcmF3TW92ZUNvdW50KCk7XG4gICAgICAgIHRoaXMuZHJhd0xldmVsKCk7XG4gICAgfVxuXG4gICAgcG9wdWxhdGUoKSB7XG4gICAgICAgIGZvcihsZXQgaT0wOyBpIDwgdGhpcy5yb3dzOyBpKyspIHtcbiAgICAgICAgICAgIHRoaXMuYnViYmxlc1tpXSA9IFtdO1xuICAgICAgICAgICAgZm9yKGxldCBqPTA7IGo8IHRoaXMuY29sdW1uczsgaisrKSB7XG4gICAgICAgICAgICAgICAgbGV0IG5ld0J1YmJsZSA9IG5ldyBCdWJibGUoJ2J1YmJsZScsbnVsbCwgbnVsbCwgbnVsbCwgaSAsIGopO1xuICAgICAgICAgICAgICAgIGxldCBkaW0gPSBuZXdCdWJibGUuZ2V0QnViYmxlRGltZW5zaW9ucyhpLCBqKTtcbiAgICAgICAgICAgICAgICBuZXdCdWJibGUueCA9IGRpbS54O1xuICAgICAgICAgICAgICAgIG5ld0J1YmJsZS55ID0gZGltLnk7XG4gICAgICAgICAgICAgICAgdGhpcy5idWJibGVzW2ldLnB1c2gobmV3QnViYmxlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICB0aGlzLnBsYWNlUmFuZG9tQmFuYW5hcygpO1xuICAgIH1cblxuICAgIGRyYXdCdWJibGVzKCkge1xuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMuYnViYmxlcy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgZm9yIChsZXQgaiA9IDA7IGogPCB0aGlzLmNvbHVtbnM7IGorKykge1xuICAgICAgICAgICAgICAgIGlmKHRoaXMuYnViYmxlc1tpXVtqXSAmJiB0aGlzLmJ1YmJsZXNbaV1bal0ucmVtb3ZlZCA9PT0gZmFsc2UpIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgYnViYmxlID0gdGhpcy5idWJibGVzW2ldW2pdO1xuICAgICAgICAgICAgICAgICAgICBpZihidWJibGUudHlwZSA9PT0gJ2JhbmFuYScpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJ1YmJsZS5kcmF3QmFuYW5hKHRoaXMuY3R4KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuYmFuYW5hQ291bnQgKz0gMTtcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJ1YmJsZS5kcmF3KHRoaXMuY3R4LCB0aGlzLmdhbWUuaW1hZ2UsIGxldmVsQ29sb3JzW3RoaXMuZ2FtZS5sZXZlbF0pO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuXG4gICAgZHJhd0J1YmJsZVNob290ZXIoKSB7XG4gICAgICAgIGlmICghdGhpcy5idWJibGVTaG9vdGVyKSB7XG4gICAgICAgICAgICBpZiAodGhpcy5uZXh0U2hvb3RlckJ1YmJsZSkge1xuICAgICAgICAgICAgICAgIHRoaXMuYnViYmxlU2hvb3RlciA9IHRoaXMubmV4dFNob290ZXJCdWJibGU7XG4gICAgICAgICAgICAgICAgdGhpcy5idWJibGVTaG9vdGVyLnggPSB0aGlzLmJ1YmJsZVNob290ZXJYO1xuICAgICAgICAgICAgICAgIHRoaXMuYnViYmxlU2hvb3Rlci55ID0gdGhpcy5idWJibGVTaG9vdGVyWTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgdGhpcy5idWJibGVTaG9vdGVyID0gbmV3IEJ1YmJsZShcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJ3Nob290ZXInLCBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5idWJibGVTaG9vdGVyWCwgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuYnViYmxlU2hvb3RlclksIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnNlbGVjdFJhbmRvbUJ1YmJsZSh0aGlzLnJvd3MgLSAxKS5jb2xvcik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLm5leHRTaG9vdGVyQnViYmxlID0gbmV3IEJ1YmJsZShcbiAgICAgICAgICAgICAgICAnc2hvb3RlcicsXG4gICAgICAgICAgICAgICAgdGhpcy5uZXh0U2hvb3RlclgsXG4gICAgICAgICAgICAgICAgdGhpcy5uZXh0U2hvb3RlclksXG4gICAgICAgICAgICAgICAgdGhpcy5zZWxlY3RSYW5kb21CdWJibGUodGhpcy5yb3dzIC0gMSkuY29sb3IpO1xuICAgICAgICAgICAgdGhpcy5uZXh0U2hvb3RlckJ1YmJsZS5kcmF3KHRoaXMuY3R4LCB0aGlzLmdhbWUuaW1hZ2UpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuYnViYmxlU2hvb3Rlci5kcmF3KHRoaXMuY3R4LCB0aGlzLmdhbWUuaW1hZ2UpO1xuICAgIH1cblxuICAgIGRyYXdNb3ZlQ291bnQoKSB7XG4gICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwibW92ZXMtdmFsXCIpLmlubmVySFRNTCA9IHRoaXMubW92ZXNBbGxvd2VkIC0gdGhpcy5jdXJyZW50TW92ZUNvdW50O1xuICAgIH1cblxuICAgIGRyYXdTY29yZSgpIHtcbiAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJzY29yZS12YWxcIikuaW5uZXJIVE1MID0gdGhpcy5zY29yZTtcbiAgICB9XG5cbiAgICBkcmF3TGV2ZWwoKSB7XG4gICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwibGV2ZWwtdmFsXCIpLmlubmVySFRNTCA9IHRoaXMuZ2FtZS5sZXZlbDtcbiAgICB9XG5cbiAgICBjYWxjdWxhdGVTY29yZSgpIHtcbiAgICAgICAgbGV0IHNjb3JlID0gMDtcbiAgICAgICAgaWYgKHRoaXMuY2x1c3RlckNvdW50ID4gMikge1xuICAgICAgICAgICAgc2NvcmUgPSB0aGlzLmNsdXN0ZXJDb3VudCAqIDEwO1xuICAgICAgICAgICAgaWYgKCh0aGlzLmJhbmFuYVRhcmdldCAtIHRoaXMuYmFuYW5hQ291bnQpID4gMCkge1xuICAgICAgICAgICAgICAgIHNjb3JlICs9ICgodGhpcy5iYW5hbmFUYXJnZXQgLSB0aGlzLmJhbmFuYUNvdW50KSAqIDIwKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICB0aGlzLnNjb3JlICs9IHNjb3JlO1xuICAgIH1cblxuICAgIHJlbmRlcigpIHtcbiAgICAgICAgdGhpcy5jdHguY2xlYXJSZWN0KDAsIDAsIDY0MCwgNTEwKTtcbiAgICAgICAgdGhpcy5kcmF3QnViYmxlcygpO1xuICAgICAgICB0aGlzLmRyYXdNb3ZlQ291bnQoKTtcbiAgICAgICAgdGhpcy5jYWxjdWxhdGVTY29yZSgpO1xuICAgICAgICB0aGlzLmRyYXdTY29yZSgpO1xuICAgICAgICB0aGlzLmRyYXdMZXZlbCgpO1xuICAgIH1cblxuICAgIGNoZWNrQ29sbGlzaW9uKCkge1xuICAgICAgICBjb25zdCBzaG9vdGVyWCA9IHRoaXMuYnViYmxlU2hvb3Rlci54O1xuICAgICAgICBjb25zdCBzaG9vdGVyWSA9IHRoaXMuYnViYmxlU2hvb3Rlci55O1xuICAgICAgICBjb25zdCBhbGxCdWJibGVzID0gdGhpcy5idWJibGVzLmZsYXQoKTtcbiAgICAgICAgbGV0IGNvbGxpc2lvbiA9IGZhbHNlO1xuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGFsbEJ1YmJsZXMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIGlmIChhbGxCdWJibGVzW2ldLnJlbW92ZWQgPT09IGZhbHNlICYmIHRoaXMuY2hlY2tUd29CdWJibGVzSW50ZXJzZWN0aW9uKGFsbEJ1YmJsZXNbaV0sIHsgeDogc2hvb3RlclgsIHk6IHNob290ZXJZIH0pKSB7XG4gICAgICAgICAgICAgICAgY29sbGlzaW9uID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBpZiAoY29sbGlzaW9uID09PSB0cnVlIHx8IHNob290ZXJZID09PSA3MCkge1xuICAgICAgICAgICAgdGhpcy5zZXRCdWJibGVTaG9vdGVyKCk7XG4gICAgICAgICAgICB0aGlzLnJlc2V0QnViYmxlcygpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBjb2xsaXNpb247XG4gICAgfVxuXG4gICAgcmVzZXRCdWJibGVzKCkge1xuICAgICAgICB0aGlzLnJlbW92ZUFsbE1hdGNoaW5nQnViYmxlcyh0aGlzLmJ1YmJsZVNob290ZXIpO1xuICAgICAgICBpZiAodGhpcy5jbHVzdGVyQ291bnQgPiAyKSB7XG4gICAgICAgICAgICBjb25zdCBidWJibGVTb3VuZCA9IG5ldyBTb3VuZChcImFzc2V0cy9zb3VuZHMvcG9wLm1wM1wiKTtcbiAgICAgICAgICAgIGJ1YmJsZVNvdW5kLnBsYXkoKTtcbiAgICAgICAgICAgIHRoaXMubWFya1JlbW92ZWQodGhpcy50ZW1wQ2x1c3RlcnMpO1xuICAgICAgICAgICAgdGhpcy5yZW1vdmVBbGxMb29zZUJ1YmJsZXMoKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLnJlbmRlcigpO1xuICAgIH1cblxuICAgIHNldEJ1YmJsZVNob290ZXIoKSB7XG4gICAgICAgIGNvbnN0IGdyaWQgPSB0aGlzLmdldENsb3Nlc3RWYWxpZFBvc2l0aW9uKHRoaXMuYnViYmxlU2hvb3Rlcik7XG4gICAgICAgIGNvbnN0IGRpbSA9IHRoaXMuYnViYmxlU2hvb3Rlci5nZXRCdWJibGVEaW1lbnNpb25zKGdyaWQucm93LCBncmlkLmNvbCk7XG4gICAgICAgIGNvbnN0IG5ld0J1YmJsZSA9IG5ldyBCdWJibGUoJ2J1YmJsZScsIGRpbS54LCBkaW0ueSwgdGhpcy5idWJibGVTaG9vdGVyLmNvbG9yLCBncmlkLnJvdywgZ3JpZC5jb2wpO1xuICAgICAgICB0aGlzLmJ1YmJsZXNbZ3JpZC5yb3ddID0gdGhpcy5idWJibGVzW2dyaWQucm93XSA/IHRoaXMuYnViYmxlc1tncmlkLnJvd10gOiBbXTtcbiAgICAgICAgdGhpcy5idWJibGVzW2dyaWQucm93XVtncmlkLmNvbF0gPSBuZXdCdWJibGU7XG4gICAgICAgIHRoaXMuYnViYmxlU2hvb3RlciA9IG5ld0J1YmJsZTtcbiAgICB9XG5cbiAgICBjaGVja1R3b0J1YmJsZXNJbnRlcnNlY3Rpb24oYnViYmxlMSwgYnViYmxlMikge1xuICAgICAgICBjb25zdCBkeCA9IGJ1YmJsZTEueCAtIGJ1YmJsZTIueDtcbiAgICAgICAgY29uc3QgZHkgPSBidWJibGUxLnkgLSBidWJibGUyLnk7XG4gICAgICAgIGNvbnN0IGRpc3RhbmNlID0gTWF0aC5zcXJ0KGR4ICogZHggKyBkeSAqIGR5KTtcbiAgICAgICAgaWYgKGRpc3RhbmNlIDwgKHRoaXMuYnViYmxlRGlhbWV0ZXIpKSB7XG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuXG5cbiAgICBnZXRDbG9zZXN0VmFsaWRQb3NpdGlvbihidWJibGUpIHtcbiAgICAgICAgY29uc3QgeCA9IGJ1YmJsZS54O1xuICAgICAgICBjb25zdCB5ID0gYnViYmxlLnk7XG4gICAgICAgIGNvbnN0IHJvdyA9IE1hdGguZmxvb3IoKHkpIC8gdGhpcy5idWJibGVEaWFtZXRlcik7XG4gICAgICAgIGNvbnN0IHJvd09mZnNldCA9IChyb3clMiA9PT0gMSkgPyB0aGlzLmJ1YmJsZURpYW1ldGVyLzIgOiAwO1xuICAgICAgICBjb25zdCBjb2wgPSBNYXRoLmZsb29yKCh4IC0gcm93T2Zmc2V0KSAvIHRoaXMuYnViYmxlRGlhbWV0ZXIpO1xuICAgICAgICBsZXQgcmVzdWx0ID0geyByb3c6IHJvdyAtIDEsIGNvbCB9O1xuICAgICAgICBpZiAodGhpcy5idWJibGVzW3JvdyAtIDFdICYmIHRoaXMuYnViYmxlc1tyb3cgLSAxXVtjb2xdICYmIHRoaXMuYnViYmxlc1tyb3ctMV1bY29sXS5yZW1vdmVkID09PSBmYWxzZSkge1xuICAgICAgICAgICAgcmVzdWx0ID0gdGhpcy5nZXRPdGhlclBvc3NpYmxlUG9zaXRpb24ocm93LTEsIGNvbC0xKSB8fCByZXN1bHQ7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICB9XG5cbiAgICBnZXRPdGhlclBvc3NpYmxlUG9zaXRpb24oY3VycmVudFJvdywgY3VycmVudENvbCkge1xuICAgICAgICBjb25zdCByb3dUeXBlID0gKGN1cnJlbnRSb3cpICUgMjtcbiAgICAgICAgY29uc3QgcG9zc2liaWxpdGllcyA9IEFESl9ESUZGU1tyb3dUeXBlXTtcblxuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHBvc3NpYmlsaXRpZXMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIGNvbnN0IGNvbCA9IGN1cnJlbnRDb2wgKyBwb3NzaWJpbGl0aWVzW2ldWzBdO1xuICAgICAgICAgICAgY29uc3Qgcm93ID0gY3VycmVudFJvdyArIHBvc3NpYmlsaXRpZXNbaV1bMV07XG5cbiAgICAgICAgICAgIGlmIChjb2wgPj0gMCAmJiBjb2wgPCB0aGlzLmNvbHVtbnMgJiYgcm93ID49IDApIHtcbiAgICAgICAgICAgICAgICBpZiAoKCF0aGlzLmJ1YmJsZXNbcm93XSkgfHwgIXRoaXMuYnViYmxlc1tyb3ddW2NvbF0gfHwgXG4gICAgICAgICAgICAgICAgICAgICh0aGlzLmJ1YmJsZXNbcm93XVtjb2xdICYmIHRoaXMuYnViYmxlc1tyb3ddW2NvbF0ucmVtb3ZlZCA9PT0gdHJ1ZSkpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHtyb3csIGNvbH07XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuXG4gICAgZ2V0QWxsQWRqYWNlbnRCdWJibGVzKGJ1YmJsZSkge1xuICAgICAgICB2YXIgcm93VHlwZSA9IChidWJibGUucm93KSAlIDI7XG4gICAgICAgIHZhciBuZWlnaGJvcnMgPSBbXTtcbiAgICAgICAgdmFyIHBvc3NpYmlsaXRpZXMgPSBBREpfRElGRlNbcm93VHlwZV07XG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgcG9zc2liaWxpdGllcy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgdmFyIGNvbCA9IGJ1YmJsZS5jb2wgKyBwb3NzaWJpbGl0aWVzW2ldWzBdO1xuICAgICAgICAgICAgdmFyIHJvdyA9IGJ1YmJsZS5yb3cgKyBwb3NzaWJpbGl0aWVzW2ldWzFdO1xuXG4gICAgICAgICAgICBpZiAoY29sID49IDAgJiYgY29sIDwgdGhpcy5jb2x1bW5zICYmIHJvdyA+PSAwICYmIHJvdyA8IHRoaXMuYnViYmxlcy5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5idWJibGVzW3Jvd10gJiYgdGhpcy5idWJibGVzW3Jvd11bY29sXSAmJiB0aGlzLmJ1YmJsZXNbcm93XVtjb2xdLnJlbW92ZWQgPT09IGZhbHNlKSB7XG4gICAgICAgICAgICAgICAgICAgIG5laWdoYm9ycy5wdXNoKHRoaXMuYnViYmxlc1tyb3ddW2NvbF0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBuZWlnaGJvcnM7XG4gICAgfVxuXG4gICAgcmVtb3ZlQWxsTWF0Y2hpbmdCdWJibGVzKHRhcmdldEJ1YmJsZSkge1xuICAgICAgICB0aGlzLnRlbXBDbHVzdGVycy5wdXNoKHRhcmdldEJ1YmJsZSk7XG4gICAgICAgIHRoaXMuY2x1c3RlckNvdW50ICs9IDE7XG4gICAgICAgIGNvbnN0IHJvd1R5cGUgPSAodGFyZ2V0QnViYmxlLnJvdykgJSAyO1xuICAgICAgICBjb25zdCBwb3NzaWJpbGl0aWVzID0gQURKX0RJRkZTW3Jvd1R5cGVdO1xuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHBvc3NpYmlsaXRpZXMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIGNvbnN0IGNvbCA9IHRhcmdldEJ1YmJsZS5jb2wgKyBwb3NzaWJpbGl0aWVzW2ldWzBdO1xuICAgICAgICAgICAgY29uc3Qgcm93ID0gdGFyZ2V0QnViYmxlLnJvdyArIHBvc3NpYmlsaXRpZXNbaV1bMV07XG4gICAgICAgICAgICBpZiAoY29sID49IDAgJiYgY29sIDwgdGhpcy5jb2x1bW5zICYmIHJvdyA+PSAwICYmIHJvdyA8IHRoaXMuYnViYmxlcy5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgICBpZih0aGlzLmJ1YmJsZXNbcm93XSAmJiB0aGlzLmJ1YmJsZXNbcm93XVtjb2xdKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGFkakJ1YmJsZSA9IHRoaXMuYnViYmxlc1tyb3ddW2NvbF07XG4gICAgICAgICAgICAgICAgICAgIGlmICgoYWRqQnViYmxlLnR5cGUgPT09ICdiYW5hbmEnIHx8IChhZGpCdWJibGUudHlwZSAhPSAnYmFuYW5hJyAmJiBhZGpCdWJibGUuY29sb3IgPT09IHRoaXMuYnViYmxlU2hvb3Rlci5jb2xvcikpIFxuICAgICAgICAgICAgICAgICAgICAgICAgJiYgYWRqQnViYmxlLnJlbW92ZWQgPT09IGZhbHNlICYmICF0aGlzLnRlbXBDbHVzdGVycy5pbmNsdWRlcyhhZGpCdWJibGUpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnJlbW92ZUFsbE1hdGNoaW5nQnViYmxlcyhhZGpCdWJibGUpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuXG4gICAgcmVtb3ZlQWxsTG9vc2VCdWJibGVzKCkge1xuICAgICAgICBmb3IgKGxldCBpID0gdGhpcy5idWJibGVzLmxlbmd0aCAtIDE7IGkgPj0gMDsgaS0tKSB7XG4gICAgICAgICAgICBmb3IgKGxldCBqID0gMDsgaiA8IHRoaXMuY29sdW1uczsgaisrKSB7XG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuYnViYmxlc1tpXSAmJiB0aGlzLmJ1YmJsZXNbaV1bal0gJiYgdGhpcy5idWJibGVzW2ldW2pdLnJlbW92ZWQgPT09IGZhbHNlKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGJ1YmJsZSA9IHRoaXMuYnViYmxlc1tpXVtqXTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCF0aGlzLmZvdW5kQ2x1c3RlcnMuaW5jbHVkZXMoYCR7YnViYmxlLnJvd30tJHtidWJibGUuY29sfWApKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmZpbmRCdWJibGVUcmVlKGJ1YmJsZS5yb3csIGJ1YmJsZS5jb2wpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuXG4gICAgLy9CRlMgdXNpbmcgcXVldWVcbiAgICBmaW5kQnViYmxlVHJlZShyb3csIGNvbCkge1xuICAgICAgICBsZXQgYWxsTm9kZXMgPSBbdGhpcy5idWJibGVzW3Jvd11bY29sXV07XG4gICAgICAgIGxldCBidWJibGVUcmVlID0gW107XG4gICAgICAgIGxldCBwcm9jZXNzZWQgPSBbXTtcbiAgICAgICAgbGV0IGxvb3NlQnViYmxlID0gdHJ1ZTtcbiAgICAgICAgd2hpbGUgKGFsbE5vZGVzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgIGNvbnN0IGN1cnJlbnROb2RlID0gYWxsTm9kZXMuc2hpZnQoKTtcbiAgICAgICAgICAgIGlmICghcHJvY2Vzc2VkLmluY2x1ZGVzKGN1cnJlbnROb2RlKSkge1xuICAgICAgICAgICAgICAgIHByb2Nlc3NlZC5wdXNoKGN1cnJlbnROb2RlKTtcbiAgICAgICAgICAgICAgICBpZiAoY3VycmVudE5vZGUucm93ID09PSAwKSB7XG4gICAgICAgICAgICAgICAgICAgIGxvb3NlQnViYmxlID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHRoaXMuZm91bmRDbHVzdGVycy5wdXNoKGAke2N1cnJlbnROb2RlLnJvd30tJHtjdXJyZW50Tm9kZS5jb2x9YCk7XG4gICAgICAgICAgICAgICAgYWxsTm9kZXMgPSBhbGxOb2Rlcy5jb25jYXQodGhpcy5nZXRBbGxBZGphY2VudEJ1YmJsZXMoY3VycmVudE5vZGUpKTtcbiAgICAgICAgICAgICAgICBidWJibGVUcmVlLnB1c2goY3VycmVudE5vZGUpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGlmIChsb29zZUJ1YmJsZSkge1xuICAgICAgICAgICAgdGhpcy5tYXJrUmVtb3ZlZChidWJibGVUcmVlKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gYnViYmxlVHJlZTtcbiAgICB9XG5cbiAgICBtYXJrUmVtb3ZlZChidWJibGVzKSB7XG4gICAgICAgIGZvcihsZXQgaT0wOyBpIDwgYnViYmxlcy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgdGhpcy5idWJibGVzW2J1YmJsZXNbaV0ucm93XVtidWJibGVzW2ldLmNvbF0ucmVtb3ZlZCA9IHRydWU7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBzZWxlY3RSYW5kb21CdWJibGUocm93U3RhcnQgPSAwLCByb3dFbmQgPSB0aGlzLnJvd3MsIGNvbFN0YXJ0ID0gMCwgY29sRW5kID0gdGhpcy5jb2x1bW5zKSB7XG4gICAgICAgIGNvbnN0IHNhbXBsZURhdGEgPSB0aGlzLmdldFNlbGVjdGVkQnViYmxlcyhyb3dTdGFydCwgcm93RW5kLCBjb2xTdGFydCwgY29sRW5kKTtcbiAgICAgICAgcmV0dXJuIHNhbXBsZURhdGFbTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogc2FtcGxlRGF0YS5sZW5ndGgpXTtcbiAgICB9XG5cbiAgICBnZXRTZWxlY3RlZEJ1YmJsZXMocm93U3RhcnQgPSAwLCByb3dFbmQgPSB0aGlzLnJvd3MsIGNvbFN0YXJ0ID0gMCwgY29sRW5kID0gdGhpcy5jb2x1bW5zKSB7XG4gICAgICAgIGxldCBzYW1wbGVEYXRhID0gW107XG4gICAgICAgIGZvciAobGV0IGkgPSByb3dTdGFydDsgaSA8IHJvd0VuZDsgaSsrKSB7XG4gICAgICAgICAgICBmb3IgKGxldCBqID0gY29sU3RhcnQ7IGogPCBjb2xFbmQ7IGorKykge1xuICAgICAgICAgICAgICAgIHNhbXBsZURhdGEucHVzaCh0aGlzLmJ1YmJsZXNbaV1bal0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBzYW1wbGVEYXRhO1xuICAgIH1cblxuICAgIHBsYWNlUmFuZG9tQmFuYW5hcygpIHtcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLmJhbmFuYVRhcmdldDsgaSsrKSB7XG4gICAgICAgICAgICBjb25zdCBiYW5hbmFSb3cgPSBNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiAodGhpcy5yb3dzLTEpKTtcbiAgICAgICAgICAgIGNvbnN0IGJhbmFuYUNvbCA9IE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIHRoaXMuY29sdW1ucyk7XG4gICAgICAgICAgICBjb25zdCBiYW5hbmEgPSBuZXcgQnViYmxlKCdiYW5hbmEnKTtcbiAgICAgICAgICAgIGNvbnN0IGRpbSA9IGJhbmFuYS5nZXRCdWJibGVEaW1lbnNpb25zKGJhbmFuYVJvdywgYmFuYW5hQ29sKTtcbiAgICAgICAgICAgIGJhbmFuYS54ID0gZGltLng7XG4gICAgICAgICAgICBiYW5hbmEueSA9IGRpbS55O1xuICAgICAgICAgICAgYmFuYW5hLnJvdyA9IGJhbmFuYVJvdztcbiAgICAgICAgICAgIGJhbmFuYS5jb2wgPSBiYW5hbmFDb2w7XG4gICAgICAgICAgICB0aGlzLmJ1YmJsZXNbYmFuYW5hUm93XVtiYW5hbmFDb2xdID0gYmFuYW5hO1xuICAgICAgICB9XG4gICAgfVxufVxuXG5leHBvcnQgZGVmYXVsdCBCb2FyZDsiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./src/js/board.js\n");

/***/ }),

/***/ "./src/js/bubble.js":
/*!**************************!*\
  !*** ./src/js/bubble.js ***!
  \**************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\nvar diameter = 40;\nvar rowOffset = 20;\nvar colOffset = 70;\n\nclass Bubble {\n\n    constructor(type, x, y, color, row, col) {\n        this.removed = false;\n        this.type = type;\n        this.color = color || null;\n        this.x = x;\n        this.y = y;\n        this.row = row;\n        this.col = col;\n    }\n\n    getBubbleDimensions(row, column) {\n        let bubbleX = (column * diameter) + rowOffset;\n        if(row%2 === 1) {\n            bubbleX += diameter/2;\n        }\n        let bubbleY = (row* diameter) + colOffset;\n        return {x: bubbleX, y:bubbleY};\n    }\n\n    draw(ctx, bubbleSprite, colors) {\n        ctx.beginPath();\n        this.color = this.color || this.getRandomColour(colors);\n        const spr = bubbleSprite.sprites[this.color];\n        const w = spr.w;\n        const h = spr.h;\n        ctx.drawImage(bubbleSprite, spr.x, spr.y, w, h, this.x, this.y, w, h);\n        ctx.closePath();\n    }\n\n    clearBubble() {\n        this.removed = true;\n    }\n\n    getRandomColour(colors) {\n        return colors[Math.floor(Math.random() * colors.length)];\n    }\n\n    clearArc(ctx) {\n        ctx.save();\n        ctx.beginPath();\n        ctx.globalCompositeOperation = 'destination-out';\n        ctx.clearRect(this.x, this.y, diameter, diameter);\n        ctx.fill();\n        ctx.restore();\n    }\n\n    drawBanana(ctx) {\n        var bananaImg = document.createElement('img');\n        bananaImg.src = 'assets/images/banana.png';\n        bananaImg.onload = () => {\n            this.clearArc(ctx);\n            const radius = (diameter/2)-1;\n            ctx.arc(this.x + radius + 2, this.y + radius + 2, radius, 0, Math.PI * 2, true);\n            ctx.fillStyle = \"#70D434\";\n            ctx.fill();\n            ctx.drawImage(bananaImg, 0, 0, bananaImg.width, bananaImg.height, this.x + 5, this.y+5, 27, 27);\n        };\n    }\n}\n\n/* harmony default export */ __webpack_exports__[\"default\"] = (Bubble);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvanMvYnViYmxlLmpzP2QwN2QiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7QUFBQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGdCQUFnQjtBQUNoQjs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVlLHFFQUFNLEVBQUMiLCJmaWxlIjoiLi9zcmMvanMvYnViYmxlLmpzLmpzIiwic291cmNlc0NvbnRlbnQiOlsidmFyIGRpYW1ldGVyID0gNDA7XG52YXIgcm93T2Zmc2V0ID0gMjA7XG52YXIgY29sT2Zmc2V0ID0gNzA7XG5cbmNsYXNzIEJ1YmJsZSB7XG5cbiAgICBjb25zdHJ1Y3Rvcih0eXBlLCB4LCB5LCBjb2xvciwgcm93LCBjb2wpIHtcbiAgICAgICAgdGhpcy5yZW1vdmVkID0gZmFsc2U7XG4gICAgICAgIHRoaXMudHlwZSA9IHR5cGU7XG4gICAgICAgIHRoaXMuY29sb3IgPSBjb2xvciB8fCBudWxsO1xuICAgICAgICB0aGlzLnggPSB4O1xuICAgICAgICB0aGlzLnkgPSB5O1xuICAgICAgICB0aGlzLnJvdyA9IHJvdztcbiAgICAgICAgdGhpcy5jb2wgPSBjb2w7XG4gICAgfVxuXG4gICAgZ2V0QnViYmxlRGltZW5zaW9ucyhyb3csIGNvbHVtbikge1xuICAgICAgICBsZXQgYnViYmxlWCA9IChjb2x1bW4gKiBkaWFtZXRlcikgKyByb3dPZmZzZXQ7XG4gICAgICAgIGlmKHJvdyUyID09PSAxKSB7XG4gICAgICAgICAgICBidWJibGVYICs9IGRpYW1ldGVyLzI7XG4gICAgICAgIH1cbiAgICAgICAgbGV0IGJ1YmJsZVkgPSAocm93KiBkaWFtZXRlcikgKyBjb2xPZmZzZXQ7XG4gICAgICAgIHJldHVybiB7eDogYnViYmxlWCwgeTpidWJibGVZfTtcbiAgICB9XG5cbiAgICBkcmF3KGN0eCwgYnViYmxlU3ByaXRlLCBjb2xvcnMpIHtcbiAgICAgICAgY3R4LmJlZ2luUGF0aCgpO1xuICAgICAgICB0aGlzLmNvbG9yID0gdGhpcy5jb2xvciB8fCB0aGlzLmdldFJhbmRvbUNvbG91cihjb2xvcnMpO1xuICAgICAgICBjb25zdCBzcHIgPSBidWJibGVTcHJpdGUuc3ByaXRlc1t0aGlzLmNvbG9yXTtcbiAgICAgICAgY29uc3QgdyA9IHNwci53O1xuICAgICAgICBjb25zdCBoID0gc3ByLmg7XG4gICAgICAgIGN0eC5kcmF3SW1hZ2UoYnViYmxlU3ByaXRlLCBzcHIueCwgc3ByLnksIHcsIGgsIHRoaXMueCwgdGhpcy55LCB3LCBoKTtcbiAgICAgICAgY3R4LmNsb3NlUGF0aCgpO1xuICAgIH1cblxuICAgIGNsZWFyQnViYmxlKCkge1xuICAgICAgICB0aGlzLnJlbW92ZWQgPSB0cnVlO1xuICAgIH1cblxuICAgIGdldFJhbmRvbUNvbG91cihjb2xvcnMpIHtcbiAgICAgICAgcmV0dXJuIGNvbG9yc1tNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiBjb2xvcnMubGVuZ3RoKV07XG4gICAgfVxuXG4gICAgY2xlYXJBcmMoY3R4KSB7XG4gICAgICAgIGN0eC5zYXZlKCk7XG4gICAgICAgIGN0eC5iZWdpblBhdGgoKTtcbiAgICAgICAgY3R4Lmdsb2JhbENvbXBvc2l0ZU9wZXJhdGlvbiA9ICdkZXN0aW5hdGlvbi1vdXQnO1xuICAgICAgICBjdHguY2xlYXJSZWN0KHRoaXMueCwgdGhpcy55LCBkaWFtZXRlciwgZGlhbWV0ZXIpO1xuICAgICAgICBjdHguZmlsbCgpO1xuICAgICAgICBjdHgucmVzdG9yZSgpO1xuICAgIH1cblxuICAgIGRyYXdCYW5hbmEoY3R4KSB7XG4gICAgICAgIHZhciBiYW5hbmFJbWcgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdpbWcnKTtcbiAgICAgICAgYmFuYW5hSW1nLnNyYyA9ICdhc3NldHMvaW1hZ2VzL2JhbmFuYS5wbmcnO1xuICAgICAgICBiYW5hbmFJbWcub25sb2FkID0gKCkgPT4ge1xuICAgICAgICAgICAgdGhpcy5jbGVhckFyYyhjdHgpO1xuICAgICAgICAgICAgY29uc3QgcmFkaXVzID0gKGRpYW1ldGVyLzIpLTE7XG4gICAgICAgICAgICBjdHguYXJjKHRoaXMueCArIHJhZGl1cyArIDIsIHRoaXMueSArIHJhZGl1cyArIDIsIHJhZGl1cywgMCwgTWF0aC5QSSAqIDIsIHRydWUpO1xuICAgICAgICAgICAgY3R4LmZpbGxTdHlsZSA9IFwiIzcwRDQzNFwiO1xuICAgICAgICAgICAgY3R4LmZpbGwoKTtcbiAgICAgICAgICAgIGN0eC5kcmF3SW1hZ2UoYmFuYW5hSW1nLCAwLCAwLCBiYW5hbmFJbWcud2lkdGgsIGJhbmFuYUltZy5oZWlnaHQsIHRoaXMueCArIDUsIHRoaXMueSs1LCAyNywgMjcpO1xuICAgICAgICB9O1xuICAgIH1cbn1cblxuZXhwb3J0IGRlZmF1bHQgQnViYmxlO1xuIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./src/js/bubble.js\n");

/***/ }),

/***/ "./src/js/game.js":
/*!************************!*\
  !*** ./src/js/game.js ***!
  \************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _board__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./board */ \"./src/js/board.js\");\n/* harmony import */ var _sound__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./sound */ \"./src/js/sound.js\");\n\n\n\nvar colOffset = 70;\n\nvar levelSettings = {\n    1: { bananaTarget: 5, movesAllowed: 15 },\n    2: { bananaTarget: 7, movesAllowed: 20 },\n    3: { bananaTarget: 9, movesAllowed: 25 }\n}\n\nvar allColors = ['red', 'orange', 'yellow', 'green', 'seagreen', 'blue', 'purple', 'pink'];\n\nclass Game {\n    constructor(ctx, canvas) {\n        this.canvas = canvas;\n        this.level = 1;\n        this.playAngle = null;\n        this.ready = false;\n        this.onMouseMove = this.onMouseMove.bind(this);\n        this.onMouseDown = this.onMouseDown.bind(this);\n        this.shooterMoving = false;\n        this.gameOver = false;\n        this.won = false;\n        this.ctx = ctx;\n        this.board = new _board__WEBPACK_IMPORTED_MODULE_0__[\"default\"](this, ctx);\n        this.disabled = true;\n    }\n\n    play() {\n        this.makeMove();\n    }\n\n    setGameStatus() {\n        if(this.board.bananaCount === 0) {\n            this.won = true;\n        } else if (this.board.currentMoveCount >= this.board.movesAllowed) {\n            this.gameOver = true;\n        } else if (this.board.bubbles.length >=11) {\n            this.gameOver = true;\n        }\n        this.alertGameStatus();\n    }\n\n    alertGameStatus() {\n        const gameStatus = document.getElementById('game-status-heading');\n        const finalScore = document.getElementById('final-score');\n        const statusBox = document.getElementById('game-status');\n        const gameActions = document.getElementById('game-actions');\n        let statusChange = false;\n        if (this.gameOver) {  \n            const gameOver = new _sound__WEBPACK_IMPORTED_MODULE_1__[\"default\"](\"assets/sounds/game-over.mp3\");\n            gameOver.play();  \n            gameStatus.innerHTML = \"You Lose!\";\n            statusChange = true;\n            gameActions.innerHTML = '<i class=\"fas fa-sync\" id=\"replay-btn\"></i>';\n        } else if(this.won) {\n            const gameSound = new _sound__WEBPACK_IMPORTED_MODULE_1__[\"default\"](\"assets/sounds/game-win.mp3\");\n            gameSound.play();\n            gameStatus.innerHTML = \"You Won!\";\n            finalScore.innerHTML = `Score: ${this.board.score}`;\n            statusChange = true;\n            if (this.level < 3) {\n                gameActions.innerHTML = '<i class=\"fas fa-sync\" id=\"replay-btn\"></i><i class=\"fas fa-forward\" id=\"next-level\"></i>';\n            }\n        }\n        if (statusChange === true) {\n            const replayBtn = document.getElementById('replay-btn');\n            const nextLevelBtn = document.getElementById('next-level');\n            if (replayBtn) {\n                replayBtn.onclick = () => this.loadLevel();\n            }\n            if (nextLevelBtn) {\n                nextLevelBtn.onclick = () => this.loadNextLevel();\n            }\n            this.disabled = true;\n            statusBox.style.visibility = 'visible';\n        } else {\n            gameActions.innerHTML = \"\";\n            gameStatus.innerHTML = \"\";\n            finalScore.innerHTML = \"\";\n        }\n    }\n\n    resetAfterCollision() {\n        this.setGameStatus();\n        this.board.bubbleShooter = null;\n        this.shooterMoving = false;\n        this.playAngle = null;\n        this.board.foundClusters = [];\n        this.board.clusterCount = 0;\n        this.board.bananaCount = 0;\n        this.board.tempClusters = [];\n    }\n\n    makeMove() {\n        const rads = this.degToRad(this.playAngle);\n        const speed = 500;\n        let dx = Math.cos(rads) * speed / 60;\n        let dy = Math.sin(rads) * speed / 60;\n        var interval = setInterval(() => {\n            const shooter = this.board.bubbleShooter;\n            if ((shooter.x + dx <= 0) || (shooter.x + dx + this.board.bubbleDiameter >= this.canvas.width)) {\n                this.playAngle = 180 - this.playAngle;\n                dx = -dx;\n            }\n            let touchTop = false;\n            if ((shooter.y + dy <= colOffset)) {\n                shooter.y = colOffset;\n                dx = 0;\n                dy = 0;\n                touchTop = true;\n            }\n            const isCollision = this.board.checkCollision();\n            if (isCollision || touchTop) {\n                this.resetAfterCollision();\n                clearInterval(interval);\n            } else {\n                shooter.clearArc(this.board.ctx);\n                shooter.x = shooter.x + dx;\n                shooter.y = shooter.y - dy;\n            }\n            \n            this.board.drawBubbleShooter();\n        }, 1000 / 60);\n    }\n\n    start() {\n        this.loadBubblesImage();\n        this.board.loadGame();\n    }\n\n    radToDeg(angle) {\n        return angle * (180 / Math.PI);\n    }\n\n    degToRad(angle) {\n        return angle * (Math.PI / 180);\n    }\n\n    onMouseMove(e) {\n        if (this.disabled === false && this.shooterMoving === false) {\n            const pos = this.getMousePos(this.canvas, e);\n            let mouseangle = this.radToDeg(\n                Math.atan2(\n                    (this.board.bubbleShooterY + this.board.bubbleDiameter) - pos.y, \n                    pos.x - (this.board.bubbleShooterX + this.board.bubbleDiameter)\n                )\n            );\n            if (mouseangle < 0) {\n                mouseangle = 180 + (180 + mouseangle);\n            }\n            const lbound = 15;\n            const ubound = 165;\n            if (mouseangle > 90 && mouseangle < 270) {\n                if (mouseangle > ubound) {\n                    mouseangle = ubound;\n                }\n            } else {\n                if (mouseangle < lbound || mouseangle >= 270) {\n                    mouseangle = lbound;\n                }\n            }\n            this.playAngle = mouseangle;\n            this.drawMouseLine();\n        }\n    }\n\n    onMouseDown(e) {\n        if (this.disabled === false && this.playAngle && this.shooterMoving === false) {\n            if (this.ready) { \n                this.shooterMoving = true;\n                this.board.currentMoveCount += 1;\n                this.play();\n            }\n        }\n    }\n\n    getMousePos(canvas, e) {\n        var rect = canvas.getBoundingClientRect();\n        return {\n            x: Math.round((e.clientX - rect.left) / (rect.right - rect.left) * canvas.width),\n            y: Math.round((e.clientY - rect.top) / (rect.bottom - rect.top) * canvas.height)\n        };\n    }\n\n    drawMouseLine() {\n        var centerx = 230 + this.board.bubbleDiameter / 2;\n        var centery = 550 + this.board.bubbleDiameter / 2;\n        var ctx = this.board.ctx;\n        ctx.clearRect(150, 480, 200, 90);\n        ctx.lineWidth = 2;\n        ctx.strokeStyle = \"#fff\";\n        ctx.beginPath();\n        ctx.setLineDash([5,10]);\n        ctx.moveTo(centerx, centery);\n        ctx.lineTo(\n            centerx + 2 * this.board.bubbleDiameter * Math.cos(this.degToRad(this.playAngle)),\n            centery - 2 * this.board.bubbleDiameter * Math.sin(this.degToRad(this.playAngle)));\n        ctx.stroke();\n    }\n\n    loadNextLevel() {\n        this.level += 1;\n        this.loadLevel();\n    }\n\n    loadLevel() {\n        this.board = new _board__WEBPACK_IMPORTED_MODULE_0__[\"default\"](this, this.ctx, levelSettings[this.level].bananaTarget, levelSettings[this.level].movesAllowed);\n        this.board.render();\n        this.board.drawBubbleShooter();\n        const statusBox = document.getElementById('game-status');\n        statusBox.style.visibility = \"hidden\";\n        this.disabled = false;\n        this.won = false;\n        this.gameOver = false;\n    }\n\n    loadBubblesImage() {\n        this.image = new Image();\n        this.image.src = \"assets/images/bubbles.png\";\n        this.image.sprites = {};\n        const game = this;\n        this.image.onload = () => {\n            for (let i = 0; i < 8; i++) {\n                game.image.sprites[allColors[i]] = ({ x: i * 42, y: 0, w: 40, h: 40 });\n            }\n            game.board.drawBubbles();\n            game.board.drawBubbleShooter();\n            game.ready = true;\n        }\n    }\n}\n\n/* harmony default export */ __webpack_exports__[\"default\"] = (Game);//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvanMvZ2FtZS5qcz8yMzJkIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0FBQUE7QUFBQTtBQUE0QjtBQUNBOztBQUU1Qjs7QUFFQTtBQUNBLFFBQVEsb0NBQW9DO0FBQzVDLFFBQVEsb0NBQW9DO0FBQzVDLFFBQVE7QUFDUjs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx5QkFBeUIsOENBQUs7QUFDOUI7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDRCO0FBQ0EsaUNBQWlDLDhDQUFLO0FBQ3RDLDRCO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNULGtDQUFrQyw4Q0FBSztBQUN2QztBQUNBO0FBQ0EsNkNBQTZDLGlCQUFpQjtBQUM5RDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0EsU0FBUztBQUNUOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLDZCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLHlCQUF5Qiw4Q0FBSztBQUM5QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDJCQUEyQixPQUFPO0FBQ2xDLHFEQUFxRCxnQ0FBZ0M7QUFDckY7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRWUsbUVBQUkiLCJmaWxlIjoiLi9zcmMvanMvZ2FtZS5qcy5qcyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBCb2FyZCBmcm9tICcuL2JvYXJkJztcbmltcG9ydCBTb3VuZCBmcm9tICcuL3NvdW5kJztcblxudmFyIGNvbE9mZnNldCA9IDcwO1xuXG52YXIgbGV2ZWxTZXR0aW5ncyA9IHtcbiAgICAxOiB7IGJhbmFuYVRhcmdldDogNSwgbW92ZXNBbGxvd2VkOiAxNSB9LFxuICAgIDI6IHsgYmFuYW5hVGFyZ2V0OiA3LCBtb3Zlc0FsbG93ZWQ6IDIwIH0sXG4gICAgMzogeyBiYW5hbmFUYXJnZXQ6IDksIG1vdmVzQWxsb3dlZDogMjUgfVxufVxuXG52YXIgYWxsQ29sb3JzID0gWydyZWQnLCAnb3JhbmdlJywgJ3llbGxvdycsICdncmVlbicsICdzZWFncmVlbicsICdibHVlJywgJ3B1cnBsZScsICdwaW5rJ107XG5cbmNsYXNzIEdhbWUge1xuICAgIGNvbnN0cnVjdG9yKGN0eCwgY2FudmFzKSB7XG4gICAgICAgIHRoaXMuY2FudmFzID0gY2FudmFzO1xuICAgICAgICB0aGlzLmxldmVsID0gMTtcbiAgICAgICAgdGhpcy5wbGF5QW5nbGUgPSBudWxsO1xuICAgICAgICB0aGlzLnJlYWR5ID0gZmFsc2U7XG4gICAgICAgIHRoaXMub25Nb3VzZU1vdmUgPSB0aGlzLm9uTW91c2VNb3ZlLmJpbmQodGhpcyk7XG4gICAgICAgIHRoaXMub25Nb3VzZURvd24gPSB0aGlzLm9uTW91c2VEb3duLmJpbmQodGhpcyk7XG4gICAgICAgIHRoaXMuc2hvb3Rlck1vdmluZyA9IGZhbHNlO1xuICAgICAgICB0aGlzLmdhbWVPdmVyID0gZmFsc2U7XG4gICAgICAgIHRoaXMud29uID0gZmFsc2U7XG4gICAgICAgIHRoaXMuY3R4ID0gY3R4O1xuICAgICAgICB0aGlzLmJvYXJkID0gbmV3IEJvYXJkKHRoaXMsIGN0eCk7XG4gICAgICAgIHRoaXMuZGlzYWJsZWQgPSB0cnVlO1xuICAgIH1cblxuICAgIHBsYXkoKSB7XG4gICAgICAgIHRoaXMubWFrZU1vdmUoKTtcbiAgICB9XG5cbiAgICBzZXRHYW1lU3RhdHVzKCkge1xuICAgICAgICBpZih0aGlzLmJvYXJkLmJhbmFuYUNvdW50ID09PSAwKSB7XG4gICAgICAgICAgICB0aGlzLndvbiA9IHRydWU7XG4gICAgICAgIH0gZWxzZSBpZiAodGhpcy5ib2FyZC5jdXJyZW50TW92ZUNvdW50ID49IHRoaXMuYm9hcmQubW92ZXNBbGxvd2VkKSB7XG4gICAgICAgICAgICB0aGlzLmdhbWVPdmVyID0gdHJ1ZTtcbiAgICAgICAgfSBlbHNlIGlmICh0aGlzLmJvYXJkLmJ1YmJsZXMubGVuZ3RoID49MTEpIHtcbiAgICAgICAgICAgIHRoaXMuZ2FtZU92ZXIgPSB0cnVlO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuYWxlcnRHYW1lU3RhdHVzKCk7XG4gICAgfVxuXG4gICAgYWxlcnRHYW1lU3RhdHVzKCkge1xuICAgICAgICBjb25zdCBnYW1lU3RhdHVzID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2dhbWUtc3RhdHVzLWhlYWRpbmcnKTtcbiAgICAgICAgY29uc3QgZmluYWxTY29yZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdmaW5hbC1zY29yZScpO1xuICAgICAgICBjb25zdCBzdGF0dXNCb3ggPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZ2FtZS1zdGF0dXMnKTtcbiAgICAgICAgY29uc3QgZ2FtZUFjdGlvbnMgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZ2FtZS1hY3Rpb25zJyk7XG4gICAgICAgIGxldCBzdGF0dXNDaGFuZ2UgPSBmYWxzZTtcbiAgICAgICAgaWYgKHRoaXMuZ2FtZU92ZXIpIHsgIFxuICAgICAgICAgICAgY29uc3QgZ2FtZU92ZXIgPSBuZXcgU291bmQoXCJhc3NldHMvc291bmRzL2dhbWUtb3Zlci5tcDNcIik7XG4gICAgICAgICAgICBnYW1lT3Zlci5wbGF5KCk7ICBcbiAgICAgICAgICAgIGdhbWVTdGF0dXMuaW5uZXJIVE1MID0gXCJZb3UgTG9zZSFcIjtcbiAgICAgICAgICAgIHN0YXR1c0NoYW5nZSA9IHRydWU7XG4gICAgICAgICAgICBnYW1lQWN0aW9ucy5pbm5lckhUTUwgPSAnPGkgY2xhc3M9XCJmYXMgZmEtc3luY1wiIGlkPVwicmVwbGF5LWJ0blwiPjwvaT4nO1xuICAgICAgICB9IGVsc2UgaWYodGhpcy53b24pIHtcbiAgICAgICAgICAgIGNvbnN0IGdhbWVTb3VuZCA9IG5ldyBTb3VuZChcImFzc2V0cy9zb3VuZHMvZ2FtZS13aW4ubXAzXCIpO1xuICAgICAgICAgICAgZ2FtZVNvdW5kLnBsYXkoKTtcbiAgICAgICAgICAgIGdhbWVTdGF0dXMuaW5uZXJIVE1MID0gXCJZb3UgV29uIVwiO1xuICAgICAgICAgICAgZmluYWxTY29yZS5pbm5lckhUTUwgPSBgU2NvcmU6ICR7dGhpcy5ib2FyZC5zY29yZX1gO1xuICAgICAgICAgICAgc3RhdHVzQ2hhbmdlID0gdHJ1ZTtcbiAgICAgICAgICAgIGlmICh0aGlzLmxldmVsIDwgMykge1xuICAgICAgICAgICAgICAgIGdhbWVBY3Rpb25zLmlubmVySFRNTCA9ICc8aSBjbGFzcz1cImZhcyBmYS1zeW5jXCIgaWQ9XCJyZXBsYXktYnRuXCI+PC9pPjxpIGNsYXNzPVwiZmFzIGZhLWZvcndhcmRcIiBpZD1cIm5leHQtbGV2ZWxcIj48L2k+JztcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBpZiAoc3RhdHVzQ2hhbmdlID09PSB0cnVlKSB7XG4gICAgICAgICAgICBjb25zdCByZXBsYXlCdG4gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncmVwbGF5LWJ0bicpO1xuICAgICAgICAgICAgY29uc3QgbmV4dExldmVsQnRuID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ25leHQtbGV2ZWwnKTtcbiAgICAgICAgICAgIGlmIChyZXBsYXlCdG4pIHtcbiAgICAgICAgICAgICAgICByZXBsYXlCdG4ub25jbGljayA9ICgpID0+IHRoaXMubG9hZExldmVsKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAobmV4dExldmVsQnRuKSB7XG4gICAgICAgICAgICAgICAgbmV4dExldmVsQnRuLm9uY2xpY2sgPSAoKSA9PiB0aGlzLmxvYWROZXh0TGV2ZWwoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMuZGlzYWJsZWQgPSB0cnVlO1xuICAgICAgICAgICAgc3RhdHVzQm94LnN0eWxlLnZpc2liaWxpdHkgPSAndmlzaWJsZSc7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBnYW1lQWN0aW9ucy5pbm5lckhUTUwgPSBcIlwiO1xuICAgICAgICAgICAgZ2FtZVN0YXR1cy5pbm5lckhUTUwgPSBcIlwiO1xuICAgICAgICAgICAgZmluYWxTY29yZS5pbm5lckhUTUwgPSBcIlwiO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgcmVzZXRBZnRlckNvbGxpc2lvbigpIHtcbiAgICAgICAgdGhpcy5zZXRHYW1lU3RhdHVzKCk7XG4gICAgICAgIHRoaXMuYm9hcmQuYnViYmxlU2hvb3RlciA9IG51bGw7XG4gICAgICAgIHRoaXMuc2hvb3Rlck1vdmluZyA9IGZhbHNlO1xuICAgICAgICB0aGlzLnBsYXlBbmdsZSA9IG51bGw7XG4gICAgICAgIHRoaXMuYm9hcmQuZm91bmRDbHVzdGVycyA9IFtdO1xuICAgICAgICB0aGlzLmJvYXJkLmNsdXN0ZXJDb3VudCA9IDA7XG4gICAgICAgIHRoaXMuYm9hcmQuYmFuYW5hQ291bnQgPSAwO1xuICAgICAgICB0aGlzLmJvYXJkLnRlbXBDbHVzdGVycyA9IFtdO1xuICAgIH1cblxuICAgIG1ha2VNb3ZlKCkge1xuICAgICAgICBjb25zdCByYWRzID0gdGhpcy5kZWdUb1JhZCh0aGlzLnBsYXlBbmdsZSk7XG4gICAgICAgIGNvbnN0IHNwZWVkID0gNTAwO1xuICAgICAgICBsZXQgZHggPSBNYXRoLmNvcyhyYWRzKSAqIHNwZWVkIC8gNjA7XG4gICAgICAgIGxldCBkeSA9IE1hdGguc2luKHJhZHMpICogc3BlZWQgLyA2MDtcbiAgICAgICAgdmFyIGludGVydmFsID0gc2V0SW50ZXJ2YWwoKCkgPT4ge1xuICAgICAgICAgICAgY29uc3Qgc2hvb3RlciA9IHRoaXMuYm9hcmQuYnViYmxlU2hvb3RlcjtcbiAgICAgICAgICAgIGlmICgoc2hvb3Rlci54ICsgZHggPD0gMCkgfHwgKHNob290ZXIueCArIGR4ICsgdGhpcy5ib2FyZC5idWJibGVEaWFtZXRlciA+PSB0aGlzLmNhbnZhcy53aWR0aCkpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnBsYXlBbmdsZSA9IDE4MCAtIHRoaXMucGxheUFuZ2xlO1xuICAgICAgICAgICAgICAgIGR4ID0gLWR4O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgbGV0IHRvdWNoVG9wID0gZmFsc2U7XG4gICAgICAgICAgICBpZiAoKHNob290ZXIueSArIGR5IDw9IGNvbE9mZnNldCkpIHtcbiAgICAgICAgICAgICAgICBzaG9vdGVyLnkgPSBjb2xPZmZzZXQ7XG4gICAgICAgICAgICAgICAgZHggPSAwO1xuICAgICAgICAgICAgICAgIGR5ID0gMDtcbiAgICAgICAgICAgICAgICB0b3VjaFRvcCA9IHRydWU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb25zdCBpc0NvbGxpc2lvbiA9IHRoaXMuYm9hcmQuY2hlY2tDb2xsaXNpb24oKTtcbiAgICAgICAgICAgIGlmIChpc0NvbGxpc2lvbiB8fCB0b3VjaFRvcCkge1xuICAgICAgICAgICAgICAgIHRoaXMucmVzZXRBZnRlckNvbGxpc2lvbigpO1xuICAgICAgICAgICAgICAgIGNsZWFySW50ZXJ2YWwoaW50ZXJ2YWwpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBzaG9vdGVyLmNsZWFyQXJjKHRoaXMuYm9hcmQuY3R4KTtcbiAgICAgICAgICAgICAgICBzaG9vdGVyLnggPSBzaG9vdGVyLnggKyBkeDtcbiAgICAgICAgICAgICAgICBzaG9vdGVyLnkgPSBzaG9vdGVyLnkgLSBkeTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIFxuICAgICAgICAgICAgdGhpcy5ib2FyZC5kcmF3QnViYmxlU2hvb3RlcigpO1xuICAgICAgICB9LCAxMDAwIC8gNjApO1xuICAgIH1cblxuICAgIHN0YXJ0KCkge1xuICAgICAgICB0aGlzLmxvYWRCdWJibGVzSW1hZ2UoKTtcbiAgICAgICAgdGhpcy5ib2FyZC5sb2FkR2FtZSgpO1xuICAgIH1cblxuICAgIHJhZFRvRGVnKGFuZ2xlKSB7XG4gICAgICAgIHJldHVybiBhbmdsZSAqICgxODAgLyBNYXRoLlBJKTtcbiAgICB9XG5cbiAgICBkZWdUb1JhZChhbmdsZSkge1xuICAgICAgICByZXR1cm4gYW5nbGUgKiAoTWF0aC5QSSAvIDE4MCk7XG4gICAgfVxuXG4gICAgb25Nb3VzZU1vdmUoZSkge1xuICAgICAgICBpZiAodGhpcy5kaXNhYmxlZCA9PT0gZmFsc2UgJiYgdGhpcy5zaG9vdGVyTW92aW5nID09PSBmYWxzZSkge1xuICAgICAgICAgICAgY29uc3QgcG9zID0gdGhpcy5nZXRNb3VzZVBvcyh0aGlzLmNhbnZhcywgZSk7XG4gICAgICAgICAgICBsZXQgbW91c2VhbmdsZSA9IHRoaXMucmFkVG9EZWcoXG4gICAgICAgICAgICAgICAgTWF0aC5hdGFuMihcbiAgICAgICAgICAgICAgICAgICAgKHRoaXMuYm9hcmQuYnViYmxlU2hvb3RlclkgKyB0aGlzLmJvYXJkLmJ1YmJsZURpYW1ldGVyKSAtIHBvcy55LCBcbiAgICAgICAgICAgICAgICAgICAgcG9zLnggLSAodGhpcy5ib2FyZC5idWJibGVTaG9vdGVyWCArIHRoaXMuYm9hcmQuYnViYmxlRGlhbWV0ZXIpXG4gICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgKTtcbiAgICAgICAgICAgIGlmIChtb3VzZWFuZ2xlIDwgMCkge1xuICAgICAgICAgICAgICAgIG1vdXNlYW5nbGUgPSAxODAgKyAoMTgwICsgbW91c2VhbmdsZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb25zdCBsYm91bmQgPSAxNTtcbiAgICAgICAgICAgIGNvbnN0IHVib3VuZCA9IDE2NTtcbiAgICAgICAgICAgIGlmIChtb3VzZWFuZ2xlID4gOTAgJiYgbW91c2VhbmdsZSA8IDI3MCkge1xuICAgICAgICAgICAgICAgIGlmIChtb3VzZWFuZ2xlID4gdWJvdW5kKSB7XG4gICAgICAgICAgICAgICAgICAgIG1vdXNlYW5nbGUgPSB1Ym91bmQ7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBpZiAobW91c2VhbmdsZSA8IGxib3VuZCB8fCBtb3VzZWFuZ2xlID49IDI3MCkge1xuICAgICAgICAgICAgICAgICAgICBtb3VzZWFuZ2xlID0gbGJvdW5kO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMucGxheUFuZ2xlID0gbW91c2VhbmdsZTtcbiAgICAgICAgICAgIHRoaXMuZHJhd01vdXNlTGluZSgpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgb25Nb3VzZURvd24oZSkge1xuICAgICAgICBpZiAodGhpcy5kaXNhYmxlZCA9PT0gZmFsc2UgJiYgdGhpcy5wbGF5QW5nbGUgJiYgdGhpcy5zaG9vdGVyTW92aW5nID09PSBmYWxzZSkge1xuICAgICAgICAgICAgaWYgKHRoaXMucmVhZHkpIHsgXG4gICAgICAgICAgICAgICAgdGhpcy5zaG9vdGVyTW92aW5nID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICB0aGlzLmJvYXJkLmN1cnJlbnRNb3ZlQ291bnQgKz0gMTtcbiAgICAgICAgICAgICAgICB0aGlzLnBsYXkoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cblxuICAgIGdldE1vdXNlUG9zKGNhbnZhcywgZSkge1xuICAgICAgICB2YXIgcmVjdCA9IGNhbnZhcy5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIHg6IE1hdGgucm91bmQoKGUuY2xpZW50WCAtIHJlY3QubGVmdCkgLyAocmVjdC5yaWdodCAtIHJlY3QubGVmdCkgKiBjYW52YXMud2lkdGgpLFxuICAgICAgICAgICAgeTogTWF0aC5yb3VuZCgoZS5jbGllbnRZIC0gcmVjdC50b3ApIC8gKHJlY3QuYm90dG9tIC0gcmVjdC50b3ApICogY2FudmFzLmhlaWdodClcbiAgICAgICAgfTtcbiAgICB9XG5cbiAgICBkcmF3TW91c2VMaW5lKCkge1xuICAgICAgICB2YXIgY2VudGVyeCA9IDIzMCArIHRoaXMuYm9hcmQuYnViYmxlRGlhbWV0ZXIgLyAyO1xuICAgICAgICB2YXIgY2VudGVyeSA9IDU1MCArIHRoaXMuYm9hcmQuYnViYmxlRGlhbWV0ZXIgLyAyO1xuICAgICAgICB2YXIgY3R4ID0gdGhpcy5ib2FyZC5jdHg7XG4gICAgICAgIGN0eC5jbGVhclJlY3QoMTUwLCA0ODAsIDIwMCwgOTApO1xuICAgICAgICBjdHgubGluZVdpZHRoID0gMjtcbiAgICAgICAgY3R4LnN0cm9rZVN0eWxlID0gXCIjZmZmXCI7XG4gICAgICAgIGN0eC5iZWdpblBhdGgoKTtcbiAgICAgICAgY3R4LnNldExpbmVEYXNoKFs1LDEwXSk7XG4gICAgICAgIGN0eC5tb3ZlVG8oY2VudGVyeCwgY2VudGVyeSk7XG4gICAgICAgIGN0eC5saW5lVG8oXG4gICAgICAgICAgICBjZW50ZXJ4ICsgMiAqIHRoaXMuYm9hcmQuYnViYmxlRGlhbWV0ZXIgKiBNYXRoLmNvcyh0aGlzLmRlZ1RvUmFkKHRoaXMucGxheUFuZ2xlKSksXG4gICAgICAgICAgICBjZW50ZXJ5IC0gMiAqIHRoaXMuYm9hcmQuYnViYmxlRGlhbWV0ZXIgKiBNYXRoLnNpbih0aGlzLmRlZ1RvUmFkKHRoaXMucGxheUFuZ2xlKSkpO1xuICAgICAgICBjdHguc3Ryb2tlKCk7XG4gICAgfVxuXG4gICAgbG9hZE5leHRMZXZlbCgpIHtcbiAgICAgICAgdGhpcy5sZXZlbCArPSAxO1xuICAgICAgICB0aGlzLmxvYWRMZXZlbCgpO1xuICAgIH1cblxuICAgIGxvYWRMZXZlbCgpIHtcbiAgICAgICAgdGhpcy5ib2FyZCA9IG5ldyBCb2FyZCh0aGlzLCB0aGlzLmN0eCwgbGV2ZWxTZXR0aW5nc1t0aGlzLmxldmVsXS5iYW5hbmFUYXJnZXQsIGxldmVsU2V0dGluZ3NbdGhpcy5sZXZlbF0ubW92ZXNBbGxvd2VkKTtcbiAgICAgICAgdGhpcy5ib2FyZC5yZW5kZXIoKTtcbiAgICAgICAgdGhpcy5ib2FyZC5kcmF3QnViYmxlU2hvb3RlcigpO1xuICAgICAgICBjb25zdCBzdGF0dXNCb3ggPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZ2FtZS1zdGF0dXMnKTtcbiAgICAgICAgc3RhdHVzQm94LnN0eWxlLnZpc2liaWxpdHkgPSBcImhpZGRlblwiO1xuICAgICAgICB0aGlzLmRpc2FibGVkID0gZmFsc2U7XG4gICAgICAgIHRoaXMud29uID0gZmFsc2U7XG4gICAgICAgIHRoaXMuZ2FtZU92ZXIgPSBmYWxzZTtcbiAgICB9XG5cbiAgICBsb2FkQnViYmxlc0ltYWdlKCkge1xuICAgICAgICB0aGlzLmltYWdlID0gbmV3IEltYWdlKCk7XG4gICAgICAgIHRoaXMuaW1hZ2Uuc3JjID0gXCJhc3NldHMvaW1hZ2VzL2J1YmJsZXMucG5nXCI7XG4gICAgICAgIHRoaXMuaW1hZ2Uuc3ByaXRlcyA9IHt9O1xuICAgICAgICBjb25zdCBnYW1lID0gdGhpcztcbiAgICAgICAgdGhpcy5pbWFnZS5vbmxvYWQgPSAoKSA9PiB7XG4gICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IDg7IGkrKykge1xuICAgICAgICAgICAgICAgIGdhbWUuaW1hZ2Uuc3ByaXRlc1thbGxDb2xvcnNbaV1dID0gKHsgeDogaSAqIDQyLCB5OiAwLCB3OiA0MCwgaDogNDAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBnYW1lLmJvYXJkLmRyYXdCdWJibGVzKCk7XG4gICAgICAgICAgICBnYW1lLmJvYXJkLmRyYXdCdWJibGVTaG9vdGVyKCk7XG4gICAgICAgICAgICBnYW1lLnJlYWR5ID0gdHJ1ZTtcbiAgICAgICAgfVxuICAgIH1cbn1cblxuZXhwb3J0IGRlZmF1bHQgR2FtZTsiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./src/js/game.js\n");

/***/ }),

/***/ "./src/js/sound.js":
/*!*************************!*\
  !*** ./src/js/sound.js ***!
  \*************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\nclass Sound {\n    constructor(src) {\n        this.sound = document.createElement(\"audio\");\n        this.sound.src = src;\n        this.sound.setAttribute(\"preload\", \"auto\");\n        this.sound.setAttribute(\"controls\", \"none\");\n        this.sound.style.display = \"none\";\n        document.body.appendChild(this.sound);\n    }\n    \n    play() {\n        return this.sound.play();\n    }\n\n    stop() {\n        return this.sound.pause();\n    }\n}\n\n/* harmony default export */ __webpack_exports__[\"default\"] = (Sound);//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvanMvc291bmQuanM/YmM4YiJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRWUsb0VBQUsiLCJmaWxlIjoiLi9zcmMvanMvc291bmQuanMuanMiLCJzb3VyY2VzQ29udGVudCI6WyJjbGFzcyBTb3VuZCB7XG4gICAgY29uc3RydWN0b3Ioc3JjKSB7XG4gICAgICAgIHRoaXMuc291bmQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiYXVkaW9cIik7XG4gICAgICAgIHRoaXMuc291bmQuc3JjID0gc3JjO1xuICAgICAgICB0aGlzLnNvdW5kLnNldEF0dHJpYnV0ZShcInByZWxvYWRcIiwgXCJhdXRvXCIpO1xuICAgICAgICB0aGlzLnNvdW5kLnNldEF0dHJpYnV0ZShcImNvbnRyb2xzXCIsIFwibm9uZVwiKTtcbiAgICAgICAgdGhpcy5zb3VuZC5zdHlsZS5kaXNwbGF5ID0gXCJub25lXCI7XG4gICAgICAgIGRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQodGhpcy5zb3VuZCk7XG4gICAgfVxuICAgIFxuICAgIHBsYXkoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnNvdW5kLnBsYXkoKTtcbiAgICB9XG5cbiAgICBzdG9wKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5zb3VuZC5wYXVzZSgpO1xuICAgIH1cbn1cblxuZXhwb3J0IGRlZmF1bHQgU291bmQ7Il0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./src/js/sound.js\n");

/***/ }),

/***/ "./src/main.js":
/*!*********************!*\
  !*** ./src/main.js ***!
  \*********************/
/*! no exports provided */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _js_game__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./js/game */ \"./src/js/game.js\");\n\n\ndocument.addEventListener(\"DOMContentLoaded\", function () {\n    let canvas = document.getElementById(\"bubble-shooter-game\");\n    const ctx = canvas.getContext(\"2d\");\n    const game = new _js_game__WEBPACK_IMPORTED_MODULE_0__[\"default\"](ctx, canvas);\n    game.start();\n    \n    canvas.addEventListener(\"mousemove\", game.onMouseMove);\n    canvas.addEventListener(\"mousedown\", game.onMouseDown);\n    const instructions = document.getElementById('instructions');\n    const gamePlayBtn = document.getElementById('play');\n    if (instructions && gamePlayBtn) {\n        gamePlayBtn.onclick = () => {\n            instructions.style.display = 'none';\n            game.disabled = false;\n        }\n    }\n});//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvbWFpbi5qcz81NmQ3Il0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0FBQUE7QUFBNkI7O0FBRTdCO0FBQ0E7QUFDQTtBQUNBLHFCQUFxQixnREFBSTtBQUN6Qjs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLENBQUMiLCJmaWxlIjoiLi9zcmMvbWFpbi5qcy5qcyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBHYW1lIGZyb20gJy4vanMvZ2FtZSc7XG5cbmRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJET01Db250ZW50TG9hZGVkXCIsIGZ1bmN0aW9uICgpIHtcbiAgICBsZXQgY2FudmFzID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJidWJibGUtc2hvb3Rlci1nYW1lXCIpO1xuICAgIGNvbnN0IGN0eCA9IGNhbnZhcy5nZXRDb250ZXh0KFwiMmRcIik7XG4gICAgY29uc3QgZ2FtZSA9IG5ldyBHYW1lKGN0eCwgY2FudmFzKTtcbiAgICBnYW1lLnN0YXJ0KCk7XG4gICAgXG4gICAgY2FudmFzLmFkZEV2ZW50TGlzdGVuZXIoXCJtb3VzZW1vdmVcIiwgZ2FtZS5vbk1vdXNlTW92ZSk7XG4gICAgY2FudmFzLmFkZEV2ZW50TGlzdGVuZXIoXCJtb3VzZWRvd25cIiwgZ2FtZS5vbk1vdXNlRG93bik7XG4gICAgY29uc3QgaW5zdHJ1Y3Rpb25zID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2luc3RydWN0aW9ucycpO1xuICAgIGNvbnN0IGdhbWVQbGF5QnRuID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3BsYXknKTtcbiAgICBpZiAoaW5zdHJ1Y3Rpb25zICYmIGdhbWVQbGF5QnRuKSB7XG4gICAgICAgIGdhbWVQbGF5QnRuLm9uY2xpY2sgPSAoKSA9PiB7XG4gICAgICAgICAgICBpbnN0cnVjdGlvbnMuc3R5bGUuZGlzcGxheSA9ICdub25lJztcbiAgICAgICAgICAgIGdhbWUuZGlzYWJsZWQgPSBmYWxzZTtcbiAgICAgICAgfVxuICAgIH1cbn0pOyJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./src/main.js\n");

/***/ })

/******/ });