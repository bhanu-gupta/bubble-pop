/******/ (function(modules) { // webpackBootstrap
/******/ 	// The module cache
/******/ 	var installedModules = {};
/******/
/******/ 	// The require function
/******/ 	function __webpack_require__(moduleId) {
/******/
/******/ 		// Check if module is in cache
/******/ 		if(installedModules[moduleId]) {
/******/ 			return installedModules[moduleId].exports;
/******/ 		}
/******/ 		// Create a new module (and put it into the cache)
/******/ 		var module = installedModules[moduleId] = {
/******/ 			i: moduleId,
/******/ 			l: false,
/******/ 			exports: {}
/******/ 		};
/******/
/******/ 		// Execute the module function
/******/ 		modules[moduleId].call(module.exports, module, module.exports, __webpack_require__);
/******/
/******/ 		// Flag the module as loaded
/******/ 		module.l = true;
/******/
/******/ 		// Return the exports of the module
/******/ 		return module.exports;
/******/ 	}
/******/
/******/
/******/ 	// expose the modules object (__webpack_modules__)
/******/ 	__webpack_require__.m = modules;
/******/
/******/ 	// expose the module cache
/******/ 	__webpack_require__.c = installedModules;
/******/
/******/ 	// define getter function for harmony exports
/******/ 	__webpack_require__.d = function(exports, name, getter) {
/******/ 		if(!__webpack_require__.o(exports, name)) {
/******/ 			Object.defineProperty(exports, name, { enumerable: true, get: getter });
/******/ 		}
/******/ 	};
/******/
/******/ 	// define __esModule on exports
/******/ 	__webpack_require__.r = function(exports) {
/******/ 		if(typeof Symbol !== 'undefined' && Symbol.toStringTag) {
/******/ 			Object.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });
/******/ 		}
/******/ 		Object.defineProperty(exports, '__esModule', { value: true });
/******/ 	};
/******/
/******/ 	// create a fake namespace object
/******/ 	// mode & 1: value is a module id, require it
/******/ 	// mode & 2: merge all properties of value into the ns
/******/ 	// mode & 4: return value when already ns object
/******/ 	// mode & 8|1: behave like require
/******/ 	__webpack_require__.t = function(value, mode) {
/******/ 		if(mode & 1) value = __webpack_require__(value);
/******/ 		if(mode & 8) return value;
/******/ 		if((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;
/******/ 		var ns = Object.create(null);
/******/ 		__webpack_require__.r(ns);
/******/ 		Object.defineProperty(ns, 'default', { enumerable: true, value: value });
/******/ 		if(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));
/******/ 		return ns;
/******/ 	};
/******/
/******/ 	// getDefaultExport function for compatibility with non-harmony modules
/******/ 	__webpack_require__.n = function(module) {
/******/ 		var getter = module && module.__esModule ?
/******/ 			function getDefault() { return module['default']; } :
/******/ 			function getModuleExports() { return module; };
/******/ 		__webpack_require__.d(getter, 'a', getter);
/******/ 		return getter;
/******/ 	};
/******/
/******/ 	// Object.prototype.hasOwnProperty.call
/******/ 	__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };
/******/
/******/ 	// __webpack_public_path__
/******/ 	__webpack_require__.p = "";
/******/
/******/
/******/ 	// Load entry module and return exports
/******/ 	return __webpack_require__(__webpack_require__.s = "./src/main.js");
/******/ })
/************************************************************************/
/******/ ({

/***/ "./src/js/board.js":
/*!*************************!*\
  !*** ./src/js/board.js ***!
  \*************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _bubble__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./bubble */ \"./src/js/bubble.js\");\n/* harmony import */ var _sound__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./sound */ \"./src/js/sound.js\");\n\n\n\nvar ADJ_DIFFS = [[[1, 0], [0, 1], [-1, 1], [-1, 0], [-1, -1], [0, -1]],\n                        [[1, 0], [1, 1], [0, 1], [-1, 0], [0, -1], [1, -1]]];\n\nvar levelColors = {\n    1: ['red', 'green', 'yellow'],\n    2: ['red', 'green', 'yellow', 'orange'],\n    3: ['red', 'green', 'yellow', 'orange', 'blue']\n}\n\nclass Board {\n    constructor(game, ctx, bananaTarget, movesAllowed) {\n        this.bubbles = [];\n        this.bubbleShooter = null;\n        this.nextShooterBubble = null;\n        this.ctx = ctx;\n        this.game = game;\n        this.bananaCount = 0;\n        this.rows = 5;\n        this.columns = 11;\n        this.bubbleDiameter = 40;\n        this.bubbleShooterX = 235;\n        this.bubbleShooterY = 570;\n        this.nextShooterX = 110;\n        this.nextShooterY = 580;\n        this.clusterCount = 0;\n        this.tempClusters = [];\n        this.foundClusters = [];\n        this.score = 0;\n        this.movesAllowed = movesAllowed || 15;\n        this.bananaTarget = bananaTarget || 5;\n        this.currentMoveCount = 0;\n        this.populate();\n        window.bubbles = this.bubbles;\n    }\n\n    loadGame() {\n        this.calculateScore();\n        this.drawScore();\n        this.drawMoveCount();\n        this.drawLevel();\n    }\n\n    populate() {\n        for(let i=0; i < this.rows; i++) {\n            this.bubbles[i] = [];\n            for(let j=0; j< this.columns; j++) {\n                let newBubble = new _bubble__WEBPACK_IMPORTED_MODULE_0__[\"default\"]('bubble',null, null, null, i , j);\n                let dim = newBubble.getBubbleDimensions(i, j);\n                newBubble.x = dim.x;\n                newBubble.y = dim.y;\n                this.bubbles[i].push(newBubble);\n            }\n        }\n        this.placeRandomBananas();\n    }\n\n    drawBubbles() {\n        for (let i = 0; i < this.bubbles.length; i++) {\n            for (let j = 0; j < this.columns; j++) {\n                if(this.bubbles[i][j] && this.bubbles[i][j].removed === false) {\n                    const bubble = this.bubbles[i][j];\n                    if(bubble.type === 'banana') {\n                        bubble.drawBanana(this.ctx);\n                        this.bananaCount += 1;\n                    } else {\n                        bubble.draw(this.ctx, this.game.image, levelColors[this.game.level]);\n                    }\n                }\n            }\n        }\n    }\n\n    drawBubbleShooter() {\n        if (!this.bubbleShooter) {\n            if (this.nextShooterBubble) {\n                this.bubbleShooter = this.nextShooterBubble;\n                this.bubbleShooter.x = this.bubbleShooterX;\n                this.bubbleShooter.y = this.bubbleShooterY;\n            } else {\n                this.bubbleShooter = new _bubble__WEBPACK_IMPORTED_MODULE_0__[\"default\"](\n                                            'shooter', \n                                            this.bubbleShooterX, \n                                            this.bubbleShooterY, \n                                            this.selectRandomBubble(this.rows - 1).color);\n            }\n            this.nextShooterBubble = new _bubble__WEBPACK_IMPORTED_MODULE_0__[\"default\"](\n                'shooter',\n                this.nextShooterX,\n                this.nextShooterY,\n                this.selectRandomBubble(this.rows - 1).color);\n            this.nextShooterBubble.draw(this.ctx, this.game.image);\n        }\n        this.bubbleShooter.draw(this.ctx, this.game.image);\n    }\n\n    drawMoveCount() {\n        document.getElementById(\"moves-val\").innerHTML = this.movesAllowed - this.currentMoveCount;\n    }\n\n    drawScore() {\n        document.getElementById(\"score-val\").innerHTML = this.score;\n    }\n\n    drawLevel() {\n        document.getElementById(\"level-val\").innerHTML = this.game.level;\n    }\n\n    calculateScore() {\n        let score = 0;\n        if (this.clusterCount > 2) {\n            score = this.clusterCount * 10;\n            if ((this.bananaTarget - this.bananaCount) > 0) {\n                score += ((this.bananaTarget - this.bananaCount) * 20);\n            }\n        }\n        this.score += score;\n    }\n\n    render() {\n        this.ctx.clearRect(0, 0, 640, 510);\n        this.drawBubbles();\n        this.drawMoveCount();\n        this.calculateScore();\n        this.drawScore();\n        this.drawLevel();\n    }\n\n    checkCollision() {\n        const shooterX = this.bubbleShooter.x;\n        const shooterY = this.bubbleShooter.y;\n        const allBubbles = this.bubbles.flat();\n        let collision = false;\n        for (let i = 0; i < allBubbles.length; i++) {\n            if (allBubbles[i].removed === false && this.checkTwoBubblesIntersection(allBubbles[i], { x: shooterX, y: shooterY })) {\n                collision = true;\n                break;\n            }\n        }\n        if (collision === true || shooterY === 70) {\n            this.setBubbleShooter();\n            this.resetBubbles();\n        }\n        return collision;\n    }\n\n    resetBubbles() {\n        this.removeAllMatchingBubbles(this.bubbleShooter);\n        if (this.clusterCount > 2) {\n            const bubbleSound = new _sound__WEBPACK_IMPORTED_MODULE_1__[\"default\"](\"assets/sounds/pop.mp3\");\n            bubbleSound.play();\n            this.markRemoved(this.tempClusters);\n            this.removeAllLooseBubbles();\n        }\n        this.render();\n    }\n\n    setBubbleShooter() {\n        const grid = this.getClosestValidPosition(this.bubbleShooter);\n        const dim = this.bubbleShooter.getBubbleDimensions(grid.row, grid.col);\n        const newBubble = new _bubble__WEBPACK_IMPORTED_MODULE_0__[\"default\"]('bubble', dim.x, dim.y, this.bubbleShooter.color, grid.row, grid.col);\n        this.bubbles[grid.row] = this.bubbles[grid.row] ? this.bubbles[grid.row] : [];\n        this.bubbles[grid.row][grid.col] = newBubble;\n        this.bubbleShooter = newBubble;\n    }\n\n    checkTwoBubblesIntersection(bubble1, bubble2) {\n        const dx = bubble1.x - bubble2.x;\n        const dy = bubble1.y - bubble2.y;\n        const distance = Math.sqrt(dx * dx + dy * dy);\n        if (distance < (this.bubbleDiameter)) {\n            return true;\n        }\n        return false;\n    }\n\n\n    getClosestValidPosition(bubble) {\n        const x = bubble.x;\n        const y = bubble.y;\n        const row = Math.floor((y) / this.bubbleDiameter);\n        const rowOffset = ((row-1)%2 === 1) ? this.bubbleDiameter/2 : 0;\n        const col = Math.floor(((x - rowOffset) > 0 ? (x-rowOffset) : x) / this.bubbleDiameter);\n        let result = { row: row - 1, col: col };\n        if (this.bubbles[row - 1] && this.bubbles[row - 1][col] && this.bubbles[row-1][col].removed === false) {\n            result = this.getOtherPossiblePosition(row-1, col-1) || result;\n        }\n        return result;\n    }\n\n    getOtherPossiblePosition(currentRow, currentCol) {\n        const rowType = (currentRow) % 2;\n        const possibilities = ADJ_DIFFS[rowType];\n\n        for (let i = 0; i < possibilities.length; i++) {\n            const col = currentCol + possibilities[i][0];\n            const row = currentRow + possibilities[i][1];\n\n            if (col >= 0 && col < this.columns && row >= 0) {\n                if ((!this.bubbles[row]) || !this.bubbles[row][col] || \n                    (this.bubbles[row][col] && this.bubbles[row][col].removed === true)) {\n                    return {row, col};\n                }\n            }\n        }\n    }\n\n    getAllAdjacentBubbles(bubble) {\n        var rowType = (bubble.row) % 2;\n        var neighbors = [];\n        var possibilities = ADJ_DIFFS[rowType];\n        for (var i = 0; i < possibilities.length; i++) {\n            var col = bubble.col + possibilities[i][0];\n            var row = bubble.row + possibilities[i][1];\n\n            if (col >= 0 && col < this.columns && row >= 0 && row < this.bubbles.length) {\n                if (this.bubbles[row] && this.bubbles[row][col] && this.bubbles[row][col].removed === false) {\n                    neighbors.push(this.bubbles[row][col]);\n                }\n            }\n        }\n\n        return neighbors;\n    }\n\n    removeAllMatchingBubbles(targetBubble) {\n        this.tempClusters.push(targetBubble);\n        if (targetBubble.type !== 'banana') {\n            this.clusterCount += 1;\n        }\n        const rowType = (targetBubble.row) % 2;\n        const possibilities = ADJ_DIFFS[rowType];\n        for (let i = 0; i < possibilities.length; i++) {\n            const col = targetBubble.col + possibilities[i][0];\n            const row = targetBubble.row + possibilities[i][1];\n            if (col >= 0 && col < this.columns && row >= 0 && row < this.bubbles.length) {\n                if(this.bubbles[row] && this.bubbles[row][col]) {\n                    const adjBubble = this.bubbles[row][col];\n                    if ((adjBubble.type === 'banana' || (adjBubble.type != 'banana' && adjBubble.color === this.bubbleShooter.color)) \n                        && adjBubble.removed === false && !this.tempClusters.includes(adjBubble)) {\n                        this.removeAllMatchingBubbles(adjBubble);\n                    }\n                }\n            }\n        }\n    }\n\n    removeAllLooseBubbles() {\n        for (let i = this.bubbles.length - 1; i >= 0; i--) {\n            for (let j = 0; j < this.columns; j++) {\n                if (this.bubbles[i] && this.bubbles[i][j] && this.bubbles[i][j].removed === false) {\n                    const bubble = this.bubbles[i][j];\n                    if (!this.foundClusters.includes(`${bubble.row}-${bubble.col}`)) {\n                        this.findBubbleTree(bubble.row, bubble.col);\n                    }\n                }\n            }\n        }\n    }\n\n    //BFS using queue\n    findBubbleTree(row, col) {\n        let allNodes = [this.bubbles[row][col]];\n        let bubbleTree = [];\n        let processed = [];\n        let looseBubble = true;\n        while (allNodes.length > 0) {\n            const currentNode = allNodes.shift();\n            if (!processed.includes(currentNode)) {\n                processed.push(currentNode);\n                if (currentNode.row === 0) {\n                    looseBubble = false;\n                }\n                this.foundClusters.push(`${currentNode.row}-${currentNode.col}`);\n                allNodes = allNodes.concat(this.getAllAdjacentBubbles(currentNode));\n                bubbleTree.push(currentNode);\n            }\n        }\n        if (looseBubble) {\n            this.markRemoved(bubbleTree);\n        }\n        return bubbleTree;\n    }\n\n    markRemoved(bubbles) {\n        for(let i=0; i < bubbles.length; i++) {\n            this.bubbles[bubbles[i].row][bubbles[i].col].removed = true;\n        }\n    }\n\n    selectRandomBubble(rowStart = 0, rowEnd = this.rows, colStart = 0, colEnd = this.columns) {\n        const sampleData = this.getSelectedBubbles(rowStart, rowEnd, colStart, colEnd);\n        return sampleData[Math.floor(Math.random() * sampleData.length)];\n    }\n\n    getSelectedBubbles(rowStart = 0, rowEnd = this.rows, colStart = 0, colEnd = this.columns) {\n        let sampleData = [];\n        for (let i = rowStart; i < rowEnd; i++) {\n            for (let j = colStart; j < colEnd; j++) {\n                sampleData.push(this.bubbles[i][j]);\n            }\n        }\n        return sampleData;\n    }\n\n    placeRandomBananas() {\n        for (let i = 0; i < this.bananaTarget; i++) {\n            const bananaRow = Math.floor(Math.random() * (this.rows-1));\n            const bananaCol = Math.floor(Math.random() * this.columns);\n            const banana = new _bubble__WEBPACK_IMPORTED_MODULE_0__[\"default\"]('banana');\n            const dim = banana.getBubbleDimensions(bananaRow, bananaCol);\n            banana.x = dim.x;\n            banana.y = dim.y;\n            banana.row = bananaRow;\n            banana.col = bananaCol;\n            this.bubbles[bananaRow][bananaCol] = banana;\n        }\n    }\n}\n\n/* harmony default export */ __webpack_exports__[\"default\"] = (Board);//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvanMvYm9hcmQuanM/MzkwZiJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtBQUFBO0FBQUE7QUFBOEI7QUFDRjs7QUFFNUI7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLG9CQUFvQixlQUFlO0FBQ25DO0FBQ0Esd0JBQXdCLGlCQUFpQjtBQUN6QyxvQ0FBb0MsK0NBQU07QUFDMUM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLHVCQUF1Qix5QkFBeUI7QUFDaEQsMkJBQTJCLGtCQUFrQjtBQUM3QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EscUJBQXFCO0FBQ3JCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2IseUNBQXlDLCtDQUFNO0FBQy9DO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx5Q0FBeUMsK0NBQU07QUFDL0M7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx1QkFBdUIsdUJBQXVCO0FBQzlDLG9HQUFvRywyQkFBMkI7QUFDL0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0Esb0NBQW9DLDhDQUFLO0FBQ3pDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSw4QkFBOEIsK0NBQU07QUFDcEM7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxzQkFBc0I7QUFDdEI7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUEsdUJBQXVCLDBCQUEwQjtBQUNqRDtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLDRCQUE0QjtBQUM1QjtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHVCQUF1QiwwQkFBMEI7QUFDakQ7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHVCQUF1QiwwQkFBMEI7QUFDakQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQSw2Q0FBNkMsUUFBUTtBQUNyRCwyQkFBMkIsa0JBQWtCO0FBQzdDO0FBQ0E7QUFDQSx3REFBd0QsV0FBVyxHQUFHLFdBQVc7QUFDakY7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsMkNBQTJDLGdCQUFnQixHQUFHLGdCQUFnQjtBQUM5RTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQSxvQkFBb0Isb0JBQW9CO0FBQ3hDO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsOEJBQThCLFlBQVk7QUFDMUMsa0NBQWtDLFlBQVk7QUFDOUM7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLHVCQUF1Qix1QkFBdUI7QUFDOUM7QUFDQTtBQUNBLCtCQUErQiwrQ0FBTTtBQUNyQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRWUsb0VBQUsiLCJmaWxlIjoiLi9zcmMvanMvYm9hcmQuanMuanMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgQnViYmxlIGZyb20gJy4vYnViYmxlJztcbmltcG9ydCBTb3VuZCBmcm9tICcuL3NvdW5kJztcblxudmFyIEFESl9ESUZGUyA9IFtbWzEsIDBdLCBbMCwgMV0sIFstMSwgMV0sIFstMSwgMF0sIFstMSwgLTFdLCBbMCwgLTFdXSxcbiAgICAgICAgICAgICAgICAgICAgICAgIFtbMSwgMF0sIFsxLCAxXSwgWzAsIDFdLCBbLTEsIDBdLCBbMCwgLTFdLCBbMSwgLTFdXV07XG5cbnZhciBsZXZlbENvbG9ycyA9IHtcbiAgICAxOiBbJ3JlZCcsICdncmVlbicsICd5ZWxsb3cnXSxcbiAgICAyOiBbJ3JlZCcsICdncmVlbicsICd5ZWxsb3cnLCAnb3JhbmdlJ10sXG4gICAgMzogWydyZWQnLCAnZ3JlZW4nLCAneWVsbG93JywgJ29yYW5nZScsICdibHVlJ11cbn1cblxuY2xhc3MgQm9hcmQge1xuICAgIGNvbnN0cnVjdG9yKGdhbWUsIGN0eCwgYmFuYW5hVGFyZ2V0LCBtb3Zlc0FsbG93ZWQpIHtcbiAgICAgICAgdGhpcy5idWJibGVzID0gW107XG4gICAgICAgIHRoaXMuYnViYmxlU2hvb3RlciA9IG51bGw7XG4gICAgICAgIHRoaXMubmV4dFNob290ZXJCdWJibGUgPSBudWxsO1xuICAgICAgICB0aGlzLmN0eCA9IGN0eDtcbiAgICAgICAgdGhpcy5nYW1lID0gZ2FtZTtcbiAgICAgICAgdGhpcy5iYW5hbmFDb3VudCA9IDA7XG4gICAgICAgIHRoaXMucm93cyA9IDU7XG4gICAgICAgIHRoaXMuY29sdW1ucyA9IDExO1xuICAgICAgICB0aGlzLmJ1YmJsZURpYW1ldGVyID0gNDA7XG4gICAgICAgIHRoaXMuYnViYmxlU2hvb3RlclggPSAyMzU7XG4gICAgICAgIHRoaXMuYnViYmxlU2hvb3RlclkgPSA1NzA7XG4gICAgICAgIHRoaXMubmV4dFNob290ZXJYID0gMTEwO1xuICAgICAgICB0aGlzLm5leHRTaG9vdGVyWSA9IDU4MDtcbiAgICAgICAgdGhpcy5jbHVzdGVyQ291bnQgPSAwO1xuICAgICAgICB0aGlzLnRlbXBDbHVzdGVycyA9IFtdO1xuICAgICAgICB0aGlzLmZvdW5kQ2x1c3RlcnMgPSBbXTtcbiAgICAgICAgdGhpcy5zY29yZSA9IDA7XG4gICAgICAgIHRoaXMubW92ZXNBbGxvd2VkID0gbW92ZXNBbGxvd2VkIHx8IDE1O1xuICAgICAgICB0aGlzLmJhbmFuYVRhcmdldCA9IGJhbmFuYVRhcmdldCB8fCA1O1xuICAgICAgICB0aGlzLmN1cnJlbnRNb3ZlQ291bnQgPSAwO1xuICAgICAgICB0aGlzLnBvcHVsYXRlKCk7XG4gICAgICAgIHdpbmRvdy5idWJibGVzID0gdGhpcy5idWJibGVzO1xuICAgIH1cblxuICAgIGxvYWRHYW1lKCkge1xuICAgICAgICB0aGlzLmNhbGN1bGF0ZVNjb3JlKCk7XG4gICAgICAgIHRoaXMuZHJhd1Njb3JlKCk7XG4gICAgICAgIHRoaXMuZHJhd01vdmVDb3VudCgpO1xuICAgICAgICB0aGlzLmRyYXdMZXZlbCgpO1xuICAgIH1cblxuICAgIHBvcHVsYXRlKCkge1xuICAgICAgICBmb3IobGV0IGk9MDsgaSA8IHRoaXMucm93czsgaSsrKSB7XG4gICAgICAgICAgICB0aGlzLmJ1YmJsZXNbaV0gPSBbXTtcbiAgICAgICAgICAgIGZvcihsZXQgaj0wOyBqPCB0aGlzLmNvbHVtbnM7IGorKykge1xuICAgICAgICAgICAgICAgIGxldCBuZXdCdWJibGUgPSBuZXcgQnViYmxlKCdidWJibGUnLG51bGwsIG51bGwsIG51bGwsIGkgLCBqKTtcbiAgICAgICAgICAgICAgICBsZXQgZGltID0gbmV3QnViYmxlLmdldEJ1YmJsZURpbWVuc2lvbnMoaSwgaik7XG4gICAgICAgICAgICAgICAgbmV3QnViYmxlLnggPSBkaW0ueDtcbiAgICAgICAgICAgICAgICBuZXdCdWJibGUueSA9IGRpbS55O1xuICAgICAgICAgICAgICAgIHRoaXMuYnViYmxlc1tpXS5wdXNoKG5ld0J1YmJsZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5wbGFjZVJhbmRvbUJhbmFuYXMoKTtcbiAgICB9XG5cbiAgICBkcmF3QnViYmxlcygpIHtcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLmJ1YmJsZXMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIGZvciAobGV0IGogPSAwOyBqIDwgdGhpcy5jb2x1bW5zOyBqKyspIHtcbiAgICAgICAgICAgICAgICBpZih0aGlzLmJ1YmJsZXNbaV1bal0gJiYgdGhpcy5idWJibGVzW2ldW2pdLnJlbW92ZWQgPT09IGZhbHNlKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGJ1YmJsZSA9IHRoaXMuYnViYmxlc1tpXVtqXTtcbiAgICAgICAgICAgICAgICAgICAgaWYoYnViYmxlLnR5cGUgPT09ICdiYW5hbmEnKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBidWJibGUuZHJhd0JhbmFuYSh0aGlzLmN0eCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmJhbmFuYUNvdW50ICs9IDE7XG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBidWJibGUuZHJhdyh0aGlzLmN0eCwgdGhpcy5nYW1lLmltYWdlLCBsZXZlbENvbG9yc1t0aGlzLmdhbWUubGV2ZWxdKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cblxuICAgIGRyYXdCdWJibGVTaG9vdGVyKCkge1xuICAgICAgICBpZiAoIXRoaXMuYnViYmxlU2hvb3Rlcikge1xuICAgICAgICAgICAgaWYgKHRoaXMubmV4dFNob290ZXJCdWJibGUpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmJ1YmJsZVNob290ZXIgPSB0aGlzLm5leHRTaG9vdGVyQnViYmxlO1xuICAgICAgICAgICAgICAgIHRoaXMuYnViYmxlU2hvb3Rlci54ID0gdGhpcy5idWJibGVTaG9vdGVyWDtcbiAgICAgICAgICAgICAgICB0aGlzLmJ1YmJsZVNob290ZXIueSA9IHRoaXMuYnViYmxlU2hvb3Rlclk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHRoaXMuYnViYmxlU2hvb3RlciA9IG5ldyBCdWJibGUoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICdzaG9vdGVyJywgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuYnViYmxlU2hvb3RlclgsIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmJ1YmJsZVNob290ZXJZLCBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zZWxlY3RSYW5kb21CdWJibGUodGhpcy5yb3dzIC0gMSkuY29sb3IpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5uZXh0U2hvb3RlckJ1YmJsZSA9IG5ldyBCdWJibGUoXG4gICAgICAgICAgICAgICAgJ3Nob290ZXInLFxuICAgICAgICAgICAgICAgIHRoaXMubmV4dFNob290ZXJYLFxuICAgICAgICAgICAgICAgIHRoaXMubmV4dFNob290ZXJZLFxuICAgICAgICAgICAgICAgIHRoaXMuc2VsZWN0UmFuZG9tQnViYmxlKHRoaXMucm93cyAtIDEpLmNvbG9yKTtcbiAgICAgICAgICAgIHRoaXMubmV4dFNob290ZXJCdWJibGUuZHJhdyh0aGlzLmN0eCwgdGhpcy5nYW1lLmltYWdlKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLmJ1YmJsZVNob290ZXIuZHJhdyh0aGlzLmN0eCwgdGhpcy5nYW1lLmltYWdlKTtcbiAgICB9XG5cbiAgICBkcmF3TW92ZUNvdW50KCkge1xuICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcIm1vdmVzLXZhbFwiKS5pbm5lckhUTUwgPSB0aGlzLm1vdmVzQWxsb3dlZCAtIHRoaXMuY3VycmVudE1vdmVDb3VudDtcbiAgICB9XG5cbiAgICBkcmF3U2NvcmUoKSB7XG4gICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwic2NvcmUtdmFsXCIpLmlubmVySFRNTCA9IHRoaXMuc2NvcmU7XG4gICAgfVxuXG4gICAgZHJhd0xldmVsKCkge1xuICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImxldmVsLXZhbFwiKS5pbm5lckhUTUwgPSB0aGlzLmdhbWUubGV2ZWw7XG4gICAgfVxuXG4gICAgY2FsY3VsYXRlU2NvcmUoKSB7XG4gICAgICAgIGxldCBzY29yZSA9IDA7XG4gICAgICAgIGlmICh0aGlzLmNsdXN0ZXJDb3VudCA+IDIpIHtcbiAgICAgICAgICAgIHNjb3JlID0gdGhpcy5jbHVzdGVyQ291bnQgKiAxMDtcbiAgICAgICAgICAgIGlmICgodGhpcy5iYW5hbmFUYXJnZXQgLSB0aGlzLmJhbmFuYUNvdW50KSA+IDApIHtcbiAgICAgICAgICAgICAgICBzY29yZSArPSAoKHRoaXMuYmFuYW5hVGFyZ2V0IC0gdGhpcy5iYW5hbmFDb3VudCkgKiAyMCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5zY29yZSArPSBzY29yZTtcbiAgICB9XG5cbiAgICByZW5kZXIoKSB7XG4gICAgICAgIHRoaXMuY3R4LmNsZWFyUmVjdCgwLCAwLCA2NDAsIDUxMCk7XG4gICAgICAgIHRoaXMuZHJhd0J1YmJsZXMoKTtcbiAgICAgICAgdGhpcy5kcmF3TW92ZUNvdW50KCk7XG4gICAgICAgIHRoaXMuY2FsY3VsYXRlU2NvcmUoKTtcbiAgICAgICAgdGhpcy5kcmF3U2NvcmUoKTtcbiAgICAgICAgdGhpcy5kcmF3TGV2ZWwoKTtcbiAgICB9XG5cbiAgICBjaGVja0NvbGxpc2lvbigpIHtcbiAgICAgICAgY29uc3Qgc2hvb3RlclggPSB0aGlzLmJ1YmJsZVNob290ZXIueDtcbiAgICAgICAgY29uc3Qgc2hvb3RlclkgPSB0aGlzLmJ1YmJsZVNob290ZXIueTtcbiAgICAgICAgY29uc3QgYWxsQnViYmxlcyA9IHRoaXMuYnViYmxlcy5mbGF0KCk7XG4gICAgICAgIGxldCBjb2xsaXNpb24gPSBmYWxzZTtcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBhbGxCdWJibGVzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICBpZiAoYWxsQnViYmxlc1tpXS5yZW1vdmVkID09PSBmYWxzZSAmJiB0aGlzLmNoZWNrVHdvQnViYmxlc0ludGVyc2VjdGlvbihhbGxCdWJibGVzW2ldLCB7IHg6IHNob290ZXJYLCB5OiBzaG9vdGVyWSB9KSkge1xuICAgICAgICAgICAgICAgIGNvbGxpc2lvbiA9IHRydWU7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGNvbGxpc2lvbiA9PT0gdHJ1ZSB8fCBzaG9vdGVyWSA9PT0gNzApIHtcbiAgICAgICAgICAgIHRoaXMuc2V0QnViYmxlU2hvb3RlcigpO1xuICAgICAgICAgICAgdGhpcy5yZXNldEJ1YmJsZXMoKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gY29sbGlzaW9uO1xuICAgIH1cblxuICAgIHJlc2V0QnViYmxlcygpIHtcbiAgICAgICAgdGhpcy5yZW1vdmVBbGxNYXRjaGluZ0J1YmJsZXModGhpcy5idWJibGVTaG9vdGVyKTtcbiAgICAgICAgaWYgKHRoaXMuY2x1c3RlckNvdW50ID4gMikge1xuICAgICAgICAgICAgY29uc3QgYnViYmxlU291bmQgPSBuZXcgU291bmQoXCJhc3NldHMvc291bmRzL3BvcC5tcDNcIik7XG4gICAgICAgICAgICBidWJibGVTb3VuZC5wbGF5KCk7XG4gICAgICAgICAgICB0aGlzLm1hcmtSZW1vdmVkKHRoaXMudGVtcENsdXN0ZXJzKTtcbiAgICAgICAgICAgIHRoaXMucmVtb3ZlQWxsTG9vc2VCdWJibGVzKCk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5yZW5kZXIoKTtcbiAgICB9XG5cbiAgICBzZXRCdWJibGVTaG9vdGVyKCkge1xuICAgICAgICBjb25zdCBncmlkID0gdGhpcy5nZXRDbG9zZXN0VmFsaWRQb3NpdGlvbih0aGlzLmJ1YmJsZVNob290ZXIpO1xuICAgICAgICBjb25zdCBkaW0gPSB0aGlzLmJ1YmJsZVNob290ZXIuZ2V0QnViYmxlRGltZW5zaW9ucyhncmlkLnJvdywgZ3JpZC5jb2wpO1xuICAgICAgICBjb25zdCBuZXdCdWJibGUgPSBuZXcgQnViYmxlKCdidWJibGUnLCBkaW0ueCwgZGltLnksIHRoaXMuYnViYmxlU2hvb3Rlci5jb2xvciwgZ3JpZC5yb3csIGdyaWQuY29sKTtcbiAgICAgICAgdGhpcy5idWJibGVzW2dyaWQucm93XSA9IHRoaXMuYnViYmxlc1tncmlkLnJvd10gPyB0aGlzLmJ1YmJsZXNbZ3JpZC5yb3ddIDogW107XG4gICAgICAgIHRoaXMuYnViYmxlc1tncmlkLnJvd11bZ3JpZC5jb2xdID0gbmV3QnViYmxlO1xuICAgICAgICB0aGlzLmJ1YmJsZVNob290ZXIgPSBuZXdCdWJibGU7XG4gICAgfVxuXG4gICAgY2hlY2tUd29CdWJibGVzSW50ZXJzZWN0aW9uKGJ1YmJsZTEsIGJ1YmJsZTIpIHtcbiAgICAgICAgY29uc3QgZHggPSBidWJibGUxLnggLSBidWJibGUyLng7XG4gICAgICAgIGNvbnN0IGR5ID0gYnViYmxlMS55IC0gYnViYmxlMi55O1xuICAgICAgICBjb25zdCBkaXN0YW5jZSA9IE1hdGguc3FydChkeCAqIGR4ICsgZHkgKiBkeSk7XG4gICAgICAgIGlmIChkaXN0YW5jZSA8ICh0aGlzLmJ1YmJsZURpYW1ldGVyKSkge1xuICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cblxuXG4gICAgZ2V0Q2xvc2VzdFZhbGlkUG9zaXRpb24oYnViYmxlKSB7XG4gICAgICAgIGNvbnN0IHggPSBidWJibGUueDtcbiAgICAgICAgY29uc3QgeSA9IGJ1YmJsZS55O1xuICAgICAgICBjb25zdCByb3cgPSBNYXRoLmZsb29yKCh5KSAvIHRoaXMuYnViYmxlRGlhbWV0ZXIpO1xuICAgICAgICBjb25zdCByb3dPZmZzZXQgPSAoKHJvdy0xKSUyID09PSAxKSA/IHRoaXMuYnViYmxlRGlhbWV0ZXIvMiA6IDA7XG4gICAgICAgIGNvbnN0IGNvbCA9IE1hdGguZmxvb3IoKCh4IC0gcm93T2Zmc2V0KSA+IDAgPyAoeC1yb3dPZmZzZXQpIDogeCkgLyB0aGlzLmJ1YmJsZURpYW1ldGVyKTtcbiAgICAgICAgbGV0IHJlc3VsdCA9IHsgcm93OiByb3cgLSAxLCBjb2w6IGNvbCB9O1xuICAgICAgICBpZiAodGhpcy5idWJibGVzW3JvdyAtIDFdICYmIHRoaXMuYnViYmxlc1tyb3cgLSAxXVtjb2xdICYmIHRoaXMuYnViYmxlc1tyb3ctMV1bY29sXS5yZW1vdmVkID09PSBmYWxzZSkge1xuICAgICAgICAgICAgcmVzdWx0ID0gdGhpcy5nZXRPdGhlclBvc3NpYmxlUG9zaXRpb24ocm93LTEsIGNvbC0xKSB8fCByZXN1bHQ7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICB9XG5cbiAgICBnZXRPdGhlclBvc3NpYmxlUG9zaXRpb24oY3VycmVudFJvdywgY3VycmVudENvbCkge1xuICAgICAgICBjb25zdCByb3dUeXBlID0gKGN1cnJlbnRSb3cpICUgMjtcbiAgICAgICAgY29uc3QgcG9zc2liaWxpdGllcyA9IEFESl9ESUZGU1tyb3dUeXBlXTtcblxuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHBvc3NpYmlsaXRpZXMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIGNvbnN0IGNvbCA9IGN1cnJlbnRDb2wgKyBwb3NzaWJpbGl0aWVzW2ldWzBdO1xuICAgICAgICAgICAgY29uc3Qgcm93ID0gY3VycmVudFJvdyArIHBvc3NpYmlsaXRpZXNbaV1bMV07XG5cbiAgICAgICAgICAgIGlmIChjb2wgPj0gMCAmJiBjb2wgPCB0aGlzLmNvbHVtbnMgJiYgcm93ID49IDApIHtcbiAgICAgICAgICAgICAgICBpZiAoKCF0aGlzLmJ1YmJsZXNbcm93XSkgfHwgIXRoaXMuYnViYmxlc1tyb3ddW2NvbF0gfHwgXG4gICAgICAgICAgICAgICAgICAgICh0aGlzLmJ1YmJsZXNbcm93XVtjb2xdICYmIHRoaXMuYnViYmxlc1tyb3ddW2NvbF0ucmVtb3ZlZCA9PT0gdHJ1ZSkpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHtyb3csIGNvbH07XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuXG4gICAgZ2V0QWxsQWRqYWNlbnRCdWJibGVzKGJ1YmJsZSkge1xuICAgICAgICB2YXIgcm93VHlwZSA9IChidWJibGUucm93KSAlIDI7XG4gICAgICAgIHZhciBuZWlnaGJvcnMgPSBbXTtcbiAgICAgICAgdmFyIHBvc3NpYmlsaXRpZXMgPSBBREpfRElGRlNbcm93VHlwZV07XG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgcG9zc2liaWxpdGllcy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgdmFyIGNvbCA9IGJ1YmJsZS5jb2wgKyBwb3NzaWJpbGl0aWVzW2ldWzBdO1xuICAgICAgICAgICAgdmFyIHJvdyA9IGJ1YmJsZS5yb3cgKyBwb3NzaWJpbGl0aWVzW2ldWzFdO1xuXG4gICAgICAgICAgICBpZiAoY29sID49IDAgJiYgY29sIDwgdGhpcy5jb2x1bW5zICYmIHJvdyA+PSAwICYmIHJvdyA8IHRoaXMuYnViYmxlcy5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5idWJibGVzW3Jvd10gJiYgdGhpcy5idWJibGVzW3Jvd11bY29sXSAmJiB0aGlzLmJ1YmJsZXNbcm93XVtjb2xdLnJlbW92ZWQgPT09IGZhbHNlKSB7XG4gICAgICAgICAgICAgICAgICAgIG5laWdoYm9ycy5wdXNoKHRoaXMuYnViYmxlc1tyb3ddW2NvbF0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBuZWlnaGJvcnM7XG4gICAgfVxuXG4gICAgcmVtb3ZlQWxsTWF0Y2hpbmdCdWJibGVzKHRhcmdldEJ1YmJsZSkge1xuICAgICAgICB0aGlzLnRlbXBDbHVzdGVycy5wdXNoKHRhcmdldEJ1YmJsZSk7XG4gICAgICAgIGlmICh0YXJnZXRCdWJibGUudHlwZSAhPT0gJ2JhbmFuYScpIHtcbiAgICAgICAgICAgIHRoaXMuY2x1c3RlckNvdW50ICs9IDE7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3Qgcm93VHlwZSA9ICh0YXJnZXRCdWJibGUucm93KSAlIDI7XG4gICAgICAgIGNvbnN0IHBvc3NpYmlsaXRpZXMgPSBBREpfRElGRlNbcm93VHlwZV07XG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgcG9zc2liaWxpdGllcy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgY29uc3QgY29sID0gdGFyZ2V0QnViYmxlLmNvbCArIHBvc3NpYmlsaXRpZXNbaV1bMF07XG4gICAgICAgICAgICBjb25zdCByb3cgPSB0YXJnZXRCdWJibGUucm93ICsgcG9zc2liaWxpdGllc1tpXVsxXTtcbiAgICAgICAgICAgIGlmIChjb2wgPj0gMCAmJiBjb2wgPCB0aGlzLmNvbHVtbnMgJiYgcm93ID49IDAgJiYgcm93IDwgdGhpcy5idWJibGVzLmxlbmd0aCkge1xuICAgICAgICAgICAgICAgIGlmKHRoaXMuYnViYmxlc1tyb3ddICYmIHRoaXMuYnViYmxlc1tyb3ddW2NvbF0pIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgYWRqQnViYmxlID0gdGhpcy5idWJibGVzW3Jvd11bY29sXTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKChhZGpCdWJibGUudHlwZSA9PT0gJ2JhbmFuYScgfHwgKGFkakJ1YmJsZS50eXBlICE9ICdiYW5hbmEnICYmIGFkakJ1YmJsZS5jb2xvciA9PT0gdGhpcy5idWJibGVTaG9vdGVyLmNvbG9yKSkgXG4gICAgICAgICAgICAgICAgICAgICAgICAmJiBhZGpCdWJibGUucmVtb3ZlZCA9PT0gZmFsc2UgJiYgIXRoaXMudGVtcENsdXN0ZXJzLmluY2x1ZGVzKGFkakJ1YmJsZSkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucmVtb3ZlQWxsTWF0Y2hpbmdCdWJibGVzKGFkakJ1YmJsZSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICByZW1vdmVBbGxMb29zZUJ1YmJsZXMoKSB7XG4gICAgICAgIGZvciAobGV0IGkgPSB0aGlzLmJ1YmJsZXMubGVuZ3RoIC0gMTsgaSA+PSAwOyBpLS0pIHtcbiAgICAgICAgICAgIGZvciAobGV0IGogPSAwOyBqIDwgdGhpcy5jb2x1bW5zOyBqKyspIHtcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5idWJibGVzW2ldICYmIHRoaXMuYnViYmxlc1tpXVtqXSAmJiB0aGlzLmJ1YmJsZXNbaV1bal0ucmVtb3ZlZCA9PT0gZmFsc2UpIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgYnViYmxlID0gdGhpcy5idWJibGVzW2ldW2pdO1xuICAgICAgICAgICAgICAgICAgICBpZiAoIXRoaXMuZm91bmRDbHVzdGVycy5pbmNsdWRlcyhgJHtidWJibGUucm93fS0ke2J1YmJsZS5jb2x9YCkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZmluZEJ1YmJsZVRyZWUoYnViYmxlLnJvdywgYnViYmxlLmNvbCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvL0JGUyB1c2luZyBxdWV1ZVxuICAgIGZpbmRCdWJibGVUcmVlKHJvdywgY29sKSB7XG4gICAgICAgIGxldCBhbGxOb2RlcyA9IFt0aGlzLmJ1YmJsZXNbcm93XVtjb2xdXTtcbiAgICAgICAgbGV0IGJ1YmJsZVRyZWUgPSBbXTtcbiAgICAgICAgbGV0IHByb2Nlc3NlZCA9IFtdO1xuICAgICAgICBsZXQgbG9vc2VCdWJibGUgPSB0cnVlO1xuICAgICAgICB3aGlsZSAoYWxsTm9kZXMubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgY29uc3QgY3VycmVudE5vZGUgPSBhbGxOb2Rlcy5zaGlmdCgpO1xuICAgICAgICAgICAgaWYgKCFwcm9jZXNzZWQuaW5jbHVkZXMoY3VycmVudE5vZGUpKSB7XG4gICAgICAgICAgICAgICAgcHJvY2Vzc2VkLnB1c2goY3VycmVudE5vZGUpO1xuICAgICAgICAgICAgICAgIGlmIChjdXJyZW50Tm9kZS5yb3cgPT09IDApIHtcbiAgICAgICAgICAgICAgICAgICAgbG9vc2VCdWJibGUgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgdGhpcy5mb3VuZENsdXN0ZXJzLnB1c2goYCR7Y3VycmVudE5vZGUucm93fS0ke2N1cnJlbnROb2RlLmNvbH1gKTtcbiAgICAgICAgICAgICAgICBhbGxOb2RlcyA9IGFsbE5vZGVzLmNvbmNhdCh0aGlzLmdldEFsbEFkamFjZW50QnViYmxlcyhjdXJyZW50Tm9kZSkpO1xuICAgICAgICAgICAgICAgIGJ1YmJsZVRyZWUucHVzaChjdXJyZW50Tm9kZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGxvb3NlQnViYmxlKSB7XG4gICAgICAgICAgICB0aGlzLm1hcmtSZW1vdmVkKGJ1YmJsZVRyZWUpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBidWJibGVUcmVlO1xuICAgIH1cblxuICAgIG1hcmtSZW1vdmVkKGJ1YmJsZXMpIHtcbiAgICAgICAgZm9yKGxldCBpPTA7IGkgPCBidWJibGVzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICB0aGlzLmJ1YmJsZXNbYnViYmxlc1tpXS5yb3ddW2J1YmJsZXNbaV0uY29sXS5yZW1vdmVkID0gdHJ1ZTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHNlbGVjdFJhbmRvbUJ1YmJsZShyb3dTdGFydCA9IDAsIHJvd0VuZCA9IHRoaXMucm93cywgY29sU3RhcnQgPSAwLCBjb2xFbmQgPSB0aGlzLmNvbHVtbnMpIHtcbiAgICAgICAgY29uc3Qgc2FtcGxlRGF0YSA9IHRoaXMuZ2V0U2VsZWN0ZWRCdWJibGVzKHJvd1N0YXJ0LCByb3dFbmQsIGNvbFN0YXJ0LCBjb2xFbmQpO1xuICAgICAgICByZXR1cm4gc2FtcGxlRGF0YVtNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiBzYW1wbGVEYXRhLmxlbmd0aCldO1xuICAgIH1cblxuICAgIGdldFNlbGVjdGVkQnViYmxlcyhyb3dTdGFydCA9IDAsIHJvd0VuZCA9IHRoaXMucm93cywgY29sU3RhcnQgPSAwLCBjb2xFbmQgPSB0aGlzLmNvbHVtbnMpIHtcbiAgICAgICAgbGV0IHNhbXBsZURhdGEgPSBbXTtcbiAgICAgICAgZm9yIChsZXQgaSA9IHJvd1N0YXJ0OyBpIDwgcm93RW5kOyBpKyspIHtcbiAgICAgICAgICAgIGZvciAobGV0IGogPSBjb2xTdGFydDsgaiA8IGNvbEVuZDsgaisrKSB7XG4gICAgICAgICAgICAgICAgc2FtcGxlRGF0YS5wdXNoKHRoaXMuYnViYmxlc1tpXVtqXSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHNhbXBsZURhdGE7XG4gICAgfVxuXG4gICAgcGxhY2VSYW5kb21CYW5hbmFzKCkge1xuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMuYmFuYW5hVGFyZ2V0OyBpKyspIHtcbiAgICAgICAgICAgIGNvbnN0IGJhbmFuYVJvdyA9IE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqICh0aGlzLnJvd3MtMSkpO1xuICAgICAgICAgICAgY29uc3QgYmFuYW5hQ29sID0gTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogdGhpcy5jb2x1bW5zKTtcbiAgICAgICAgICAgIGNvbnN0IGJhbmFuYSA9IG5ldyBCdWJibGUoJ2JhbmFuYScpO1xuICAgICAgICAgICAgY29uc3QgZGltID0gYmFuYW5hLmdldEJ1YmJsZURpbWVuc2lvbnMoYmFuYW5hUm93LCBiYW5hbmFDb2wpO1xuICAgICAgICAgICAgYmFuYW5hLnggPSBkaW0ueDtcbiAgICAgICAgICAgIGJhbmFuYS55ID0gZGltLnk7XG4gICAgICAgICAgICBiYW5hbmEucm93ID0gYmFuYW5hUm93O1xuICAgICAgICAgICAgYmFuYW5hLmNvbCA9IGJhbmFuYUNvbDtcbiAgICAgICAgICAgIHRoaXMuYnViYmxlc1tiYW5hbmFSb3ddW2JhbmFuYUNvbF0gPSBiYW5hbmE7XG4gICAgICAgIH1cbiAgICB9XG59XG5cbmV4cG9ydCBkZWZhdWx0IEJvYXJkOyJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./src/js/board.js\n");

/***/ }),

/***/ "./src/js/bubble.js":
/*!**************************!*\
  !*** ./src/js/bubble.js ***!
  \**************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\nvar diameter = 40;\nvar rowOffset = 20;\nvar colOffset = 70;\n\nclass Bubble {\n\n    constructor(type, x, y, color, row, col) {\n        this.removed = false;\n        this.type = type;\n        this.color = color || null;\n        this.x = x;\n        this.y = y;\n        this.row = row;\n        this.col = col;\n    }\n\n    getBubbleDimensions(row, column) {\n        let bubbleX = (column * diameter) + rowOffset;\n        if(row%2 === 1) {\n            bubbleX += diameter/2;\n        }\n        let bubbleY = (row* diameter) + colOffset;\n        return {x: bubbleX, y:bubbleY};\n    }\n\n    draw(ctx, bubbleSprite, colors) {\n        ctx.beginPath();\n        this.color = this.color || this.getRandomColour(colors);\n        const spr = bubbleSprite.sprites[this.color];\n        const w = spr.w;\n        const h = spr.h;\n        ctx.drawImage(bubbleSprite, spr.x, spr.y, w, h, this.x, this.y, w, h);\n        ctx.closePath();\n    }\n\n    clearBubble() {\n        this.removed = true;\n    }\n\n    getRandomColour(colors) {\n        return colors[Math.floor(Math.random() * colors.length)];\n    }\n\n    clearArc(ctx) {\n        ctx.save();\n        ctx.beginPath();\n        ctx.globalCompositeOperation = 'destination-out';\n        ctx.clearRect(this.x, this.y, diameter, diameter);\n        ctx.fill();\n        ctx.restore();\n    }\n\n    drawBanana(ctx) {\n        var bananaImg = document.createElement('img');\n        bananaImg.src = 'assets/images/banana.png';\n        bananaImg.onload = () => {\n            this.clearArc(ctx);\n            const radius = (diameter/2)-1;\n            ctx.arc(this.x + radius + 2, this.y + radius + 2, radius, 0, Math.PI * 2, true);\n            //ctx.fillStyle = \"#70D434\";\n            ctx.fill();\n            ctx.drawImage(bananaImg, 0, 0, bananaImg.width, bananaImg.height, this.x + 5, this.y+5, 27, 27);\n        };\n    }\n}\n\n/* harmony default export */ __webpack_exports__[\"default\"] = (Bubble);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvanMvYnViYmxlLmpzP2QwN2QiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7QUFBQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGdCQUFnQjtBQUNoQjs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVlLHFFQUFNLEVBQUMiLCJmaWxlIjoiLi9zcmMvanMvYnViYmxlLmpzLmpzIiwic291cmNlc0NvbnRlbnQiOlsidmFyIGRpYW1ldGVyID0gNDA7XG52YXIgcm93T2Zmc2V0ID0gMjA7XG52YXIgY29sT2Zmc2V0ID0gNzA7XG5cbmNsYXNzIEJ1YmJsZSB7XG5cbiAgICBjb25zdHJ1Y3Rvcih0eXBlLCB4LCB5LCBjb2xvciwgcm93LCBjb2wpIHtcbiAgICAgICAgdGhpcy5yZW1vdmVkID0gZmFsc2U7XG4gICAgICAgIHRoaXMudHlwZSA9IHR5cGU7XG4gICAgICAgIHRoaXMuY29sb3IgPSBjb2xvciB8fCBudWxsO1xuICAgICAgICB0aGlzLnggPSB4O1xuICAgICAgICB0aGlzLnkgPSB5O1xuICAgICAgICB0aGlzLnJvdyA9IHJvdztcbiAgICAgICAgdGhpcy5jb2wgPSBjb2w7XG4gICAgfVxuXG4gICAgZ2V0QnViYmxlRGltZW5zaW9ucyhyb3csIGNvbHVtbikge1xuICAgICAgICBsZXQgYnViYmxlWCA9IChjb2x1bW4gKiBkaWFtZXRlcikgKyByb3dPZmZzZXQ7XG4gICAgICAgIGlmKHJvdyUyID09PSAxKSB7XG4gICAgICAgICAgICBidWJibGVYICs9IGRpYW1ldGVyLzI7XG4gICAgICAgIH1cbiAgICAgICAgbGV0IGJ1YmJsZVkgPSAocm93KiBkaWFtZXRlcikgKyBjb2xPZmZzZXQ7XG4gICAgICAgIHJldHVybiB7eDogYnViYmxlWCwgeTpidWJibGVZfTtcbiAgICB9XG5cbiAgICBkcmF3KGN0eCwgYnViYmxlU3ByaXRlLCBjb2xvcnMpIHtcbiAgICAgICAgY3R4LmJlZ2luUGF0aCgpO1xuICAgICAgICB0aGlzLmNvbG9yID0gdGhpcy5jb2xvciB8fCB0aGlzLmdldFJhbmRvbUNvbG91cihjb2xvcnMpO1xuICAgICAgICBjb25zdCBzcHIgPSBidWJibGVTcHJpdGUuc3ByaXRlc1t0aGlzLmNvbG9yXTtcbiAgICAgICAgY29uc3QgdyA9IHNwci53O1xuICAgICAgICBjb25zdCBoID0gc3ByLmg7XG4gICAgICAgIGN0eC5kcmF3SW1hZ2UoYnViYmxlU3ByaXRlLCBzcHIueCwgc3ByLnksIHcsIGgsIHRoaXMueCwgdGhpcy55LCB3LCBoKTtcbiAgICAgICAgY3R4LmNsb3NlUGF0aCgpO1xuICAgIH1cblxuICAgIGNsZWFyQnViYmxlKCkge1xuICAgICAgICB0aGlzLnJlbW92ZWQgPSB0cnVlO1xuICAgIH1cblxuICAgIGdldFJhbmRvbUNvbG91cihjb2xvcnMpIHtcbiAgICAgICAgcmV0dXJuIGNvbG9yc1tNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiBjb2xvcnMubGVuZ3RoKV07XG4gICAgfVxuXG4gICAgY2xlYXJBcmMoY3R4KSB7XG4gICAgICAgIGN0eC5zYXZlKCk7XG4gICAgICAgIGN0eC5iZWdpblBhdGgoKTtcbiAgICAgICAgY3R4Lmdsb2JhbENvbXBvc2l0ZU9wZXJhdGlvbiA9ICdkZXN0aW5hdGlvbi1vdXQnO1xuICAgICAgICBjdHguY2xlYXJSZWN0KHRoaXMueCwgdGhpcy55LCBkaWFtZXRlciwgZGlhbWV0ZXIpO1xuICAgICAgICBjdHguZmlsbCgpO1xuICAgICAgICBjdHgucmVzdG9yZSgpO1xuICAgIH1cblxuICAgIGRyYXdCYW5hbmEoY3R4KSB7XG4gICAgICAgIHZhciBiYW5hbmFJbWcgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdpbWcnKTtcbiAgICAgICAgYmFuYW5hSW1nLnNyYyA9ICdhc3NldHMvaW1hZ2VzL2JhbmFuYS5wbmcnO1xuICAgICAgICBiYW5hbmFJbWcub25sb2FkID0gKCkgPT4ge1xuICAgICAgICAgICAgdGhpcy5jbGVhckFyYyhjdHgpO1xuICAgICAgICAgICAgY29uc3QgcmFkaXVzID0gKGRpYW1ldGVyLzIpLTE7XG4gICAgICAgICAgICBjdHguYXJjKHRoaXMueCArIHJhZGl1cyArIDIsIHRoaXMueSArIHJhZGl1cyArIDIsIHJhZGl1cywgMCwgTWF0aC5QSSAqIDIsIHRydWUpO1xuICAgICAgICAgICAgLy9jdHguZmlsbFN0eWxlID0gXCIjNzBENDM0XCI7XG4gICAgICAgICAgICBjdHguZmlsbCgpO1xuICAgICAgICAgICAgY3R4LmRyYXdJbWFnZShiYW5hbmFJbWcsIDAsIDAsIGJhbmFuYUltZy53aWR0aCwgYmFuYW5hSW1nLmhlaWdodCwgdGhpcy54ICsgNSwgdGhpcy55KzUsIDI3LCAyNyk7XG4gICAgICAgIH07XG4gICAgfVxufVxuXG5leHBvcnQgZGVmYXVsdCBCdWJibGU7XG4iXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./src/js/bubble.js\n");

/***/ }),

/***/ "./src/js/game.js":
/*!************************!*\
  !*** ./src/js/game.js ***!
  \************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _board__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./board */ \"./src/js/board.js\");\n/* harmony import */ var _sound__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./sound */ \"./src/js/sound.js\");\n\n\n\nvar colOffset = 70;\n\nvar levelSettings = {\n    1: { bananaTarget: 5, movesAllowed: 15 },\n    2: { bananaTarget: 7, movesAllowed: 20 },\n    3: { bananaTarget: 9, movesAllowed: 25 }\n}\n\nvar allColors = ['red', 'orange', 'yellow', 'green', 'seagreen', 'blue', 'purple', 'pink'];\n\nclass Game {\n    constructor(ctx, canvas) {\n        this.canvas = canvas;\n        this.level = 1;\n        this.playAngle = null;\n        this.ready = false;\n        this.onMouseMove = this.onMouseMove.bind(this);\n        this.onMouseDown = this.onMouseDown.bind(this);\n        this.shooterMoving = false;\n        this.gameOver = false;\n        this.won = false;\n        this.ctx = ctx;\n        this.board = new _board__WEBPACK_IMPORTED_MODULE_0__[\"default\"](this, ctx);\n        this.disabled = true;\n    }\n\n    play() {\n        this.makeMove();\n    }\n\n    setGameStatus() {\n        if(this.board.bananaCount === 0) {\n            this.won = true;\n        } else if (this.board.currentMoveCount >= this.board.movesAllowed) {\n            this.gameOver = true;\n        } else if (this.board.bubbles.length >=11) {\n            this.gameOver = true;\n        }\n        this.alertGameStatus();\n    }\n\n    alertGameStatus() {\n        const gameStatus = document.getElementById('game-status-heading');\n        const finalScore = document.getElementById('final-score');\n        const statusBox = document.getElementById('game-status');\n        const gameActions = document.getElementById('game-actions');\n        let statusChange = false;\n        if (this.gameOver) {  \n            const gameOver = new _sound__WEBPACK_IMPORTED_MODULE_1__[\"default\"](\"assets/sounds/game-over.mp3\");\n            gameOver.play();  \n            gameStatus.innerHTML = \"You Lose!\";\n            statusChange = true;\n            gameActions.innerHTML = '<i class=\"fas fa-sync\" id=\"replay-btn\"></i>';\n        } else if(this.won) {\n            const gameSound = new _sound__WEBPACK_IMPORTED_MODULE_1__[\"default\"](\"assets/sounds/game-win.mp3\");\n            gameSound.play();\n            gameStatus.innerHTML = \"You Won!\";\n            finalScore.innerHTML = `Score: ${this.board.score}`;\n            statusChange = true;\n            if (this.level < 3) {\n                gameActions.innerHTML = '<i class=\"fas fa-sync\" id=\"replay-btn\"></i><i class=\"fas fa-forward\" id=\"next-level\"></i>';\n            }\n        }\n        if (statusChange === true) {\n            const replayBtn = document.getElementById('replay-btn');\n            const nextLevelBtn = document.getElementById('next-level');\n            if (replayBtn) {\n                replayBtn.onclick = () => this.loadLevel();\n            }\n            if (nextLevelBtn) {\n                nextLevelBtn.onclick = () => this.loadNextLevel();\n            }\n            this.disabled = true;\n            statusBox.style.visibility = 'visible';\n        } else {\n            gameActions.innerHTML = \"\";\n            gameStatus.innerHTML = \"\";\n            finalScore.innerHTML = \"\";\n        }\n    }\n\n    resetAfterCollision() {\n        this.setGameStatus();\n        this.board.bubbleShooter = null;\n        this.shooterMoving = false;\n        this.playAngle = null;\n        this.board.foundClusters = [];\n        this.board.clusterCount = 0;\n        this.board.bananaCount = 0;\n        this.board.tempClusters = [];\n    }\n\n    makeMove() {\n        const rads = this.degToRad(this.playAngle);\n        const speed = 600;\n        let dx = Math.cos(rads) * speed / 60;\n        let dy = Math.sin(rads) * speed / 60;\n        var interval = setInterval(() => {\n            const shooter = this.board.bubbleShooter;\n            if ((shooter.x + dx <= 0) || (shooter.x + dx + this.board.bubbleDiameter >= this.canvas.width)) {\n                this.playAngle = 180 - this.playAngle;\n                dx = -dx;\n            }\n            let touchTop = false;\n            if ((shooter.y + dy <= colOffset)) {\n                shooter.y = colOffset;\n                dx = 0;\n                dy = 0;\n                touchTop = true;\n            }\n            const isCollision = this.board.checkCollision();\n            if (isCollision || touchTop) {\n                this.resetAfterCollision();\n                this.getMonkeyReady();\n                clearInterval(interval);\n            } else {\n                shooter.clearArc(this.board.ctx);\n                shooter.x = shooter.x + dx;\n                shooter.y = shooter.y - dy;\n            }\n            \n            this.board.drawBubbleShooter();\n        }, 1000 / 60);\n    }\n\n    letMonkeyShoot() {\n        const monkeyID = document.getElementById('monkey-shooter');\n        monkeyID.className=\"monkey-shooter shooting\";\n    }\n\n    getMonkeyReady() {\n        const monkeyID = document.getElementById('monkey-shooter');\n        monkeyID.className = \"monkey-shooter\";\n    }\n\n    start() {\n        this.loadBubblesImage();\n        this.board.loadGame();\n    }\n\n    radToDeg(angle) {\n        return angle * (180 / Math.PI);\n    }\n\n    degToRad(angle) {\n        return angle * (Math.PI / 180);\n    }\n\n    onMouseMove(e) {\n        if (this.disabled === false && this.shooterMoving === false) {\n            const pos = this.getMousePos(this.canvas, e);\n            let mouseangle = this.radToDeg(\n                Math.atan2(\n                    (this.board.bubbleShooterY + this.board.bubbleDiameter) - pos.y, \n                    pos.x - (this.board.bubbleShooterX + this.board.bubbleDiameter)\n                )\n            );\n            if (mouseangle < 0) {\n                mouseangle = 180 + (180 + mouseangle);\n            }\n            const lbound = 15;\n            const ubound = 165;\n            if (mouseangle > 90 && mouseangle < 270) {\n                if (mouseangle > ubound) {\n                    mouseangle = ubound;\n                }\n            } else {\n                if (mouseangle < lbound || mouseangle >= 270) {\n                    mouseangle = lbound;\n                }\n            }\n            this.playAngle = mouseangle;\n            this.drawMouseLine();\n        }\n    }\n\n    onMouseDown(e) {\n        if (this.disabled === false && this.playAngle && this.shooterMoving === false) {\n            if (this.ready) {\n                this.letMonkeyShoot(); \n                this.shooterMoving = true;\n                this.board.currentMoveCount += 1;\n                this.play();\n            }\n        }\n    }\n\n    getMousePos(canvas, e) {\n        var rect = canvas.getBoundingClientRect();\n        return {\n            x: Math.round((e.clientX - rect.left) / (rect.right - rect.left) * canvas.width),\n            y: Math.round((e.clientY - rect.top) / (rect.bottom - rect.top) * canvas.height)\n        };\n    }\n\n    drawMouseLine() {\n        var centerx = 230 + this.board.bubbleDiameter / 2;\n        var centery = 550 + this.board.bubbleDiameter / 2;\n        var ctx = this.board.ctx;\n        ctx.clearRect(150, 480, 200, 90);\n        ctx.lineWidth = 2;\n        ctx.strokeStyle = \"#fff\";\n        ctx.beginPath();\n        ctx.setLineDash([5,10]);\n        ctx.moveTo(centerx, centery);\n        ctx.lineTo(\n            centerx + 2 * this.board.bubbleDiameter * Math.cos(this.degToRad(this.playAngle)),\n            centery - 2 * this.board.bubbleDiameter * Math.sin(this.degToRad(this.playAngle)));\n        ctx.stroke();\n    }\n\n    loadNextLevel() {\n        this.level += 1;\n        this.loadLevel();\n    }\n\n    loadLevel() {\n        this.board = new _board__WEBPACK_IMPORTED_MODULE_0__[\"default\"](this, this.ctx, levelSettings[this.level].bananaTarget, levelSettings[this.level].movesAllowed);\n        this.board.render();\n        this.board.drawBubbleShooter();\n        const statusBox = document.getElementById('game-status');\n        statusBox.style.visibility = \"hidden\";\n        this.disabled = false;\n        this.won = false;\n        this.gameOver = false;\n    }\n\n    loadBubblesImage() {\n        this.image = new Image();\n        this.image.src = \"assets/images/bubbles.png\";\n        this.image.sprites = {};\n        const game = this;\n        this.image.onload = () => {\n            for (let i = 0; i < 8; i++) {\n                game.image.sprites[allColors[i]] = ({ x: i * 42, y: 0, w: 40, h: 40 });\n            }\n            game.board.drawBubbles();\n            game.board.drawBubbleShooter();\n            game.ready = true;\n        }\n    }\n}\n\n/* harmony default export */ __webpack_exports__[\"default\"] = (Game);//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvanMvZ2FtZS5qcz8yMzJkIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0FBQUE7QUFBQTtBQUE0QjtBQUNBOztBQUU1Qjs7QUFFQTtBQUNBLFFBQVEsb0NBQW9DO0FBQzVDLFFBQVEsb0NBQW9DO0FBQzVDLFFBQVE7QUFDUjs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx5QkFBeUIsOENBQUs7QUFDOUI7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDRCO0FBQ0EsaUNBQWlDLDhDQUFLO0FBQ3RDLDRCO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNULGtDQUFrQyw4Q0FBSztBQUN2QztBQUNBO0FBQ0EsNkNBQTZDLGlCQUFpQjtBQUM5RDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQSxTQUFTO0FBQ1Q7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxzQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQSx5QkFBeUIsOENBQUs7QUFDOUI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwyQkFBMkIsT0FBTztBQUNsQyxxREFBcUQsZ0NBQWdDO0FBQ3JGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVlLG1FQUFJIiwiZmlsZSI6Ii4vc3JjL2pzL2dhbWUuanMuanMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgQm9hcmQgZnJvbSAnLi9ib2FyZCc7XG5pbXBvcnQgU291bmQgZnJvbSAnLi9zb3VuZCc7XG5cbnZhciBjb2xPZmZzZXQgPSA3MDtcblxudmFyIGxldmVsU2V0dGluZ3MgPSB7XG4gICAgMTogeyBiYW5hbmFUYXJnZXQ6IDUsIG1vdmVzQWxsb3dlZDogMTUgfSxcbiAgICAyOiB7IGJhbmFuYVRhcmdldDogNywgbW92ZXNBbGxvd2VkOiAyMCB9LFxuICAgIDM6IHsgYmFuYW5hVGFyZ2V0OiA5LCBtb3Zlc0FsbG93ZWQ6IDI1IH1cbn1cblxudmFyIGFsbENvbG9ycyA9IFsncmVkJywgJ29yYW5nZScsICd5ZWxsb3cnLCAnZ3JlZW4nLCAnc2VhZ3JlZW4nLCAnYmx1ZScsICdwdXJwbGUnLCAncGluayddO1xuXG5jbGFzcyBHYW1lIHtcbiAgICBjb25zdHJ1Y3RvcihjdHgsIGNhbnZhcykge1xuICAgICAgICB0aGlzLmNhbnZhcyA9IGNhbnZhcztcbiAgICAgICAgdGhpcy5sZXZlbCA9IDE7XG4gICAgICAgIHRoaXMucGxheUFuZ2xlID0gbnVsbDtcbiAgICAgICAgdGhpcy5yZWFkeSA9IGZhbHNlO1xuICAgICAgICB0aGlzLm9uTW91c2VNb3ZlID0gdGhpcy5vbk1vdXNlTW92ZS5iaW5kKHRoaXMpO1xuICAgICAgICB0aGlzLm9uTW91c2VEb3duID0gdGhpcy5vbk1vdXNlRG93bi5iaW5kKHRoaXMpO1xuICAgICAgICB0aGlzLnNob290ZXJNb3ZpbmcgPSBmYWxzZTtcbiAgICAgICAgdGhpcy5nYW1lT3ZlciA9IGZhbHNlO1xuICAgICAgICB0aGlzLndvbiA9IGZhbHNlO1xuICAgICAgICB0aGlzLmN0eCA9IGN0eDtcbiAgICAgICAgdGhpcy5ib2FyZCA9IG5ldyBCb2FyZCh0aGlzLCBjdHgpO1xuICAgICAgICB0aGlzLmRpc2FibGVkID0gdHJ1ZTtcbiAgICB9XG5cbiAgICBwbGF5KCkge1xuICAgICAgICB0aGlzLm1ha2VNb3ZlKCk7XG4gICAgfVxuXG4gICAgc2V0R2FtZVN0YXR1cygpIHtcbiAgICAgICAgaWYodGhpcy5ib2FyZC5iYW5hbmFDb3VudCA9PT0gMCkge1xuICAgICAgICAgICAgdGhpcy53b24gPSB0cnVlO1xuICAgICAgICB9IGVsc2UgaWYgKHRoaXMuYm9hcmQuY3VycmVudE1vdmVDb3VudCA+PSB0aGlzLmJvYXJkLm1vdmVzQWxsb3dlZCkge1xuICAgICAgICAgICAgdGhpcy5nYW1lT3ZlciA9IHRydWU7XG4gICAgICAgIH0gZWxzZSBpZiAodGhpcy5ib2FyZC5idWJibGVzLmxlbmd0aCA+PTExKSB7XG4gICAgICAgICAgICB0aGlzLmdhbWVPdmVyID0gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLmFsZXJ0R2FtZVN0YXR1cygpO1xuICAgIH1cblxuICAgIGFsZXJ0R2FtZVN0YXR1cygpIHtcbiAgICAgICAgY29uc3QgZ2FtZVN0YXR1cyA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdnYW1lLXN0YXR1cy1oZWFkaW5nJyk7XG4gICAgICAgIGNvbnN0IGZpbmFsU2NvcmUgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZmluYWwtc2NvcmUnKTtcbiAgICAgICAgY29uc3Qgc3RhdHVzQm94ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2dhbWUtc3RhdHVzJyk7XG4gICAgICAgIGNvbnN0IGdhbWVBY3Rpb25zID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2dhbWUtYWN0aW9ucycpO1xuICAgICAgICBsZXQgc3RhdHVzQ2hhbmdlID0gZmFsc2U7XG4gICAgICAgIGlmICh0aGlzLmdhbWVPdmVyKSB7ICBcbiAgICAgICAgICAgIGNvbnN0IGdhbWVPdmVyID0gbmV3IFNvdW5kKFwiYXNzZXRzL3NvdW5kcy9nYW1lLW92ZXIubXAzXCIpO1xuICAgICAgICAgICAgZ2FtZU92ZXIucGxheSgpOyAgXG4gICAgICAgICAgICBnYW1lU3RhdHVzLmlubmVySFRNTCA9IFwiWW91IExvc2UhXCI7XG4gICAgICAgICAgICBzdGF0dXNDaGFuZ2UgPSB0cnVlO1xuICAgICAgICAgICAgZ2FtZUFjdGlvbnMuaW5uZXJIVE1MID0gJzxpIGNsYXNzPVwiZmFzIGZhLXN5bmNcIiBpZD1cInJlcGxheS1idG5cIj48L2k+JztcbiAgICAgICAgfSBlbHNlIGlmKHRoaXMud29uKSB7XG4gICAgICAgICAgICBjb25zdCBnYW1lU291bmQgPSBuZXcgU291bmQoXCJhc3NldHMvc291bmRzL2dhbWUtd2luLm1wM1wiKTtcbiAgICAgICAgICAgIGdhbWVTb3VuZC5wbGF5KCk7XG4gICAgICAgICAgICBnYW1lU3RhdHVzLmlubmVySFRNTCA9IFwiWW91IFdvbiFcIjtcbiAgICAgICAgICAgIGZpbmFsU2NvcmUuaW5uZXJIVE1MID0gYFNjb3JlOiAke3RoaXMuYm9hcmQuc2NvcmV9YDtcbiAgICAgICAgICAgIHN0YXR1c0NoYW5nZSA9IHRydWU7XG4gICAgICAgICAgICBpZiAodGhpcy5sZXZlbCA8IDMpIHtcbiAgICAgICAgICAgICAgICBnYW1lQWN0aW9ucy5pbm5lckhUTUwgPSAnPGkgY2xhc3M9XCJmYXMgZmEtc3luY1wiIGlkPVwicmVwbGF5LWJ0blwiPjwvaT48aSBjbGFzcz1cImZhcyBmYS1mb3J3YXJkXCIgaWQ9XCJuZXh0LWxldmVsXCI+PC9pPic7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHN0YXR1c0NoYW5nZSA9PT0gdHJ1ZSkge1xuICAgICAgICAgICAgY29uc3QgcmVwbGF5QnRuID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3JlcGxheS1idG4nKTtcbiAgICAgICAgICAgIGNvbnN0IG5leHRMZXZlbEJ0biA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCduZXh0LWxldmVsJyk7XG4gICAgICAgICAgICBpZiAocmVwbGF5QnRuKSB7XG4gICAgICAgICAgICAgICAgcmVwbGF5QnRuLm9uY2xpY2sgPSAoKSA9PiB0aGlzLmxvYWRMZXZlbCgpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKG5leHRMZXZlbEJ0bikge1xuICAgICAgICAgICAgICAgIG5leHRMZXZlbEJ0bi5vbmNsaWNrID0gKCkgPT4gdGhpcy5sb2FkTmV4dExldmVsKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLmRpc2FibGVkID0gdHJ1ZTtcbiAgICAgICAgICAgIHN0YXR1c0JveC5zdHlsZS52aXNpYmlsaXR5ID0gJ3Zpc2libGUnO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgZ2FtZUFjdGlvbnMuaW5uZXJIVE1MID0gXCJcIjtcbiAgICAgICAgICAgIGdhbWVTdGF0dXMuaW5uZXJIVE1MID0gXCJcIjtcbiAgICAgICAgICAgIGZpbmFsU2NvcmUuaW5uZXJIVE1MID0gXCJcIjtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHJlc2V0QWZ0ZXJDb2xsaXNpb24oKSB7XG4gICAgICAgIHRoaXMuc2V0R2FtZVN0YXR1cygpO1xuICAgICAgICB0aGlzLmJvYXJkLmJ1YmJsZVNob290ZXIgPSBudWxsO1xuICAgICAgICB0aGlzLnNob290ZXJNb3ZpbmcgPSBmYWxzZTtcbiAgICAgICAgdGhpcy5wbGF5QW5nbGUgPSBudWxsO1xuICAgICAgICB0aGlzLmJvYXJkLmZvdW5kQ2x1c3RlcnMgPSBbXTtcbiAgICAgICAgdGhpcy5ib2FyZC5jbHVzdGVyQ291bnQgPSAwO1xuICAgICAgICB0aGlzLmJvYXJkLmJhbmFuYUNvdW50ID0gMDtcbiAgICAgICAgdGhpcy5ib2FyZC50ZW1wQ2x1c3RlcnMgPSBbXTtcbiAgICB9XG5cbiAgICBtYWtlTW92ZSgpIHtcbiAgICAgICAgY29uc3QgcmFkcyA9IHRoaXMuZGVnVG9SYWQodGhpcy5wbGF5QW5nbGUpO1xuICAgICAgICBjb25zdCBzcGVlZCA9IDYwMDtcbiAgICAgICAgbGV0IGR4ID0gTWF0aC5jb3MocmFkcykgKiBzcGVlZCAvIDYwO1xuICAgICAgICBsZXQgZHkgPSBNYXRoLnNpbihyYWRzKSAqIHNwZWVkIC8gNjA7XG4gICAgICAgIHZhciBpbnRlcnZhbCA9IHNldEludGVydmFsKCgpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IHNob290ZXIgPSB0aGlzLmJvYXJkLmJ1YmJsZVNob290ZXI7XG4gICAgICAgICAgICBpZiAoKHNob290ZXIueCArIGR4IDw9IDApIHx8IChzaG9vdGVyLnggKyBkeCArIHRoaXMuYm9hcmQuYnViYmxlRGlhbWV0ZXIgPj0gdGhpcy5jYW52YXMud2lkdGgpKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5wbGF5QW5nbGUgPSAxODAgLSB0aGlzLnBsYXlBbmdsZTtcbiAgICAgICAgICAgICAgICBkeCA9IC1keDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGxldCB0b3VjaFRvcCA9IGZhbHNlO1xuICAgICAgICAgICAgaWYgKChzaG9vdGVyLnkgKyBkeSA8PSBjb2xPZmZzZXQpKSB7XG4gICAgICAgICAgICAgICAgc2hvb3Rlci55ID0gY29sT2Zmc2V0O1xuICAgICAgICAgICAgICAgIGR4ID0gMDtcbiAgICAgICAgICAgICAgICBkeSA9IDA7XG4gICAgICAgICAgICAgICAgdG91Y2hUb3AgPSB0cnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uc3QgaXNDb2xsaXNpb24gPSB0aGlzLmJvYXJkLmNoZWNrQ29sbGlzaW9uKCk7XG4gICAgICAgICAgICBpZiAoaXNDb2xsaXNpb24gfHwgdG91Y2hUb3ApIHtcbiAgICAgICAgICAgICAgICB0aGlzLnJlc2V0QWZ0ZXJDb2xsaXNpb24oKTtcbiAgICAgICAgICAgICAgICB0aGlzLmdldE1vbmtleVJlYWR5KCk7XG4gICAgICAgICAgICAgICAgY2xlYXJJbnRlcnZhbChpbnRlcnZhbCk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHNob290ZXIuY2xlYXJBcmModGhpcy5ib2FyZC5jdHgpO1xuICAgICAgICAgICAgICAgIHNob290ZXIueCA9IHNob290ZXIueCArIGR4O1xuICAgICAgICAgICAgICAgIHNob290ZXIueSA9IHNob290ZXIueSAtIGR5O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgXG4gICAgICAgICAgICB0aGlzLmJvYXJkLmRyYXdCdWJibGVTaG9vdGVyKCk7XG4gICAgICAgIH0sIDEwMDAgLyA2MCk7XG4gICAgfVxuXG4gICAgbGV0TW9ua2V5U2hvb3QoKSB7XG4gICAgICAgIGNvbnN0IG1vbmtleUlEID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ21vbmtleS1zaG9vdGVyJyk7XG4gICAgICAgIG1vbmtleUlELmNsYXNzTmFtZT1cIm1vbmtleS1zaG9vdGVyIHNob290aW5nXCI7XG4gICAgfVxuXG4gICAgZ2V0TW9ua2V5UmVhZHkoKSB7XG4gICAgICAgIGNvbnN0IG1vbmtleUlEID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ21vbmtleS1zaG9vdGVyJyk7XG4gICAgICAgIG1vbmtleUlELmNsYXNzTmFtZSA9IFwibW9ua2V5LXNob290ZXJcIjtcbiAgICB9XG5cbiAgICBzdGFydCgpIHtcbiAgICAgICAgdGhpcy5sb2FkQnViYmxlc0ltYWdlKCk7XG4gICAgICAgIHRoaXMuYm9hcmQubG9hZEdhbWUoKTtcbiAgICB9XG5cbiAgICByYWRUb0RlZyhhbmdsZSkge1xuICAgICAgICByZXR1cm4gYW5nbGUgKiAoMTgwIC8gTWF0aC5QSSk7XG4gICAgfVxuXG4gICAgZGVnVG9SYWQoYW5nbGUpIHtcbiAgICAgICAgcmV0dXJuIGFuZ2xlICogKE1hdGguUEkgLyAxODApO1xuICAgIH1cblxuICAgIG9uTW91c2VNb3ZlKGUpIHtcbiAgICAgICAgaWYgKHRoaXMuZGlzYWJsZWQgPT09IGZhbHNlICYmIHRoaXMuc2hvb3Rlck1vdmluZyA9PT0gZmFsc2UpIHtcbiAgICAgICAgICAgIGNvbnN0IHBvcyA9IHRoaXMuZ2V0TW91c2VQb3ModGhpcy5jYW52YXMsIGUpO1xuICAgICAgICAgICAgbGV0IG1vdXNlYW5nbGUgPSB0aGlzLnJhZFRvRGVnKFxuICAgICAgICAgICAgICAgIE1hdGguYXRhbjIoXG4gICAgICAgICAgICAgICAgICAgICh0aGlzLmJvYXJkLmJ1YmJsZVNob290ZXJZICsgdGhpcy5ib2FyZC5idWJibGVEaWFtZXRlcikgLSBwb3MueSwgXG4gICAgICAgICAgICAgICAgICAgIHBvcy54IC0gKHRoaXMuYm9hcmQuYnViYmxlU2hvb3RlclggKyB0aGlzLmJvYXJkLmJ1YmJsZURpYW1ldGVyKVxuICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICk7XG4gICAgICAgICAgICBpZiAobW91c2VhbmdsZSA8IDApIHtcbiAgICAgICAgICAgICAgICBtb3VzZWFuZ2xlID0gMTgwICsgKDE4MCArIG1vdXNlYW5nbGUpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uc3QgbGJvdW5kID0gMTU7XG4gICAgICAgICAgICBjb25zdCB1Ym91bmQgPSAxNjU7XG4gICAgICAgICAgICBpZiAobW91c2VhbmdsZSA+IDkwICYmIG1vdXNlYW5nbGUgPCAyNzApIHtcbiAgICAgICAgICAgICAgICBpZiAobW91c2VhbmdsZSA+IHVib3VuZCkge1xuICAgICAgICAgICAgICAgICAgICBtb3VzZWFuZ2xlID0gdWJvdW5kO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgaWYgKG1vdXNlYW5nbGUgPCBsYm91bmQgfHwgbW91c2VhbmdsZSA+PSAyNzApIHtcbiAgICAgICAgICAgICAgICAgICAgbW91c2VhbmdsZSA9IGxib3VuZDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLnBsYXlBbmdsZSA9IG1vdXNlYW5nbGU7XG4gICAgICAgICAgICB0aGlzLmRyYXdNb3VzZUxpbmUoKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIG9uTW91c2VEb3duKGUpIHtcbiAgICAgICAgaWYgKHRoaXMuZGlzYWJsZWQgPT09IGZhbHNlICYmIHRoaXMucGxheUFuZ2xlICYmIHRoaXMuc2hvb3Rlck1vdmluZyA9PT0gZmFsc2UpIHtcbiAgICAgICAgICAgIGlmICh0aGlzLnJlYWR5KSB7XG4gICAgICAgICAgICAgICAgdGhpcy5sZXRNb25rZXlTaG9vdCgpOyBcbiAgICAgICAgICAgICAgICB0aGlzLnNob290ZXJNb3ZpbmcgPSB0cnVlO1xuICAgICAgICAgICAgICAgIHRoaXMuYm9hcmQuY3VycmVudE1vdmVDb3VudCArPSAxO1xuICAgICAgICAgICAgICAgIHRoaXMucGxheSgpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuXG4gICAgZ2V0TW91c2VQb3MoY2FudmFzLCBlKSB7XG4gICAgICAgIHZhciByZWN0ID0gY2FudmFzLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgeDogTWF0aC5yb3VuZCgoZS5jbGllbnRYIC0gcmVjdC5sZWZ0KSAvIChyZWN0LnJpZ2h0IC0gcmVjdC5sZWZ0KSAqIGNhbnZhcy53aWR0aCksXG4gICAgICAgICAgICB5OiBNYXRoLnJvdW5kKChlLmNsaWVudFkgLSByZWN0LnRvcCkgLyAocmVjdC5ib3R0b20gLSByZWN0LnRvcCkgKiBjYW52YXMuaGVpZ2h0KVxuICAgICAgICB9O1xuICAgIH1cblxuICAgIGRyYXdNb3VzZUxpbmUoKSB7XG4gICAgICAgIHZhciBjZW50ZXJ4ID0gMjMwICsgdGhpcy5ib2FyZC5idWJibGVEaWFtZXRlciAvIDI7XG4gICAgICAgIHZhciBjZW50ZXJ5ID0gNTUwICsgdGhpcy5ib2FyZC5idWJibGVEaWFtZXRlciAvIDI7XG4gICAgICAgIHZhciBjdHggPSB0aGlzLmJvYXJkLmN0eDtcbiAgICAgICAgY3R4LmNsZWFyUmVjdCgxNTAsIDQ4MCwgMjAwLCA5MCk7XG4gICAgICAgIGN0eC5saW5lV2lkdGggPSAyO1xuICAgICAgICBjdHguc3Ryb2tlU3R5bGUgPSBcIiNmZmZcIjtcbiAgICAgICAgY3R4LmJlZ2luUGF0aCgpO1xuICAgICAgICBjdHguc2V0TGluZURhc2goWzUsMTBdKTtcbiAgICAgICAgY3R4Lm1vdmVUbyhjZW50ZXJ4LCBjZW50ZXJ5KTtcbiAgICAgICAgY3R4LmxpbmVUbyhcbiAgICAgICAgICAgIGNlbnRlcnggKyAyICogdGhpcy5ib2FyZC5idWJibGVEaWFtZXRlciAqIE1hdGguY29zKHRoaXMuZGVnVG9SYWQodGhpcy5wbGF5QW5nbGUpKSxcbiAgICAgICAgICAgIGNlbnRlcnkgLSAyICogdGhpcy5ib2FyZC5idWJibGVEaWFtZXRlciAqIE1hdGguc2luKHRoaXMuZGVnVG9SYWQodGhpcy5wbGF5QW5nbGUpKSk7XG4gICAgICAgIGN0eC5zdHJva2UoKTtcbiAgICB9XG5cbiAgICBsb2FkTmV4dExldmVsKCkge1xuICAgICAgICB0aGlzLmxldmVsICs9IDE7XG4gICAgICAgIHRoaXMubG9hZExldmVsKCk7XG4gICAgfVxuXG4gICAgbG9hZExldmVsKCkge1xuICAgICAgICB0aGlzLmJvYXJkID0gbmV3IEJvYXJkKHRoaXMsIHRoaXMuY3R4LCBsZXZlbFNldHRpbmdzW3RoaXMubGV2ZWxdLmJhbmFuYVRhcmdldCwgbGV2ZWxTZXR0aW5nc1t0aGlzLmxldmVsXS5tb3Zlc0FsbG93ZWQpO1xuICAgICAgICB0aGlzLmJvYXJkLnJlbmRlcigpO1xuICAgICAgICB0aGlzLmJvYXJkLmRyYXdCdWJibGVTaG9vdGVyKCk7XG4gICAgICAgIGNvbnN0IHN0YXR1c0JveCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdnYW1lLXN0YXR1cycpO1xuICAgICAgICBzdGF0dXNCb3guc3R5bGUudmlzaWJpbGl0eSA9IFwiaGlkZGVuXCI7XG4gICAgICAgIHRoaXMuZGlzYWJsZWQgPSBmYWxzZTtcbiAgICAgICAgdGhpcy53b24gPSBmYWxzZTtcbiAgICAgICAgdGhpcy5nYW1lT3ZlciA9IGZhbHNlO1xuICAgIH1cblxuICAgIGxvYWRCdWJibGVzSW1hZ2UoKSB7XG4gICAgICAgIHRoaXMuaW1hZ2UgPSBuZXcgSW1hZ2UoKTtcbiAgICAgICAgdGhpcy5pbWFnZS5zcmMgPSBcImFzc2V0cy9pbWFnZXMvYnViYmxlcy5wbmdcIjtcbiAgICAgICAgdGhpcy5pbWFnZS5zcHJpdGVzID0ge307XG4gICAgICAgIGNvbnN0IGdhbWUgPSB0aGlzO1xuICAgICAgICB0aGlzLmltYWdlLm9ubG9hZCA9ICgpID0+IHtcbiAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgODsgaSsrKSB7XG4gICAgICAgICAgICAgICAgZ2FtZS5pbWFnZS5zcHJpdGVzW2FsbENvbG9yc1tpXV0gPSAoeyB4OiBpICogNDIsIHk6IDAsIHc6IDQwLCBoOiA0MCB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGdhbWUuYm9hcmQuZHJhd0J1YmJsZXMoKTtcbiAgICAgICAgICAgIGdhbWUuYm9hcmQuZHJhd0J1YmJsZVNob290ZXIoKTtcbiAgICAgICAgICAgIGdhbWUucmVhZHkgPSB0cnVlO1xuICAgICAgICB9XG4gICAgfVxufVxuXG5leHBvcnQgZGVmYXVsdCBHYW1lOyJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./src/js/game.js\n");

/***/ }),

/***/ "./src/js/sound.js":
/*!*************************!*\
  !*** ./src/js/sound.js ***!
  \*************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\nclass Sound {\n    constructor(src) {\n        this.sound = document.createElement(\"audio\");\n        this.sound.src = src;\n        this.sound.setAttribute(\"preload\", \"auto\");\n        this.sound.setAttribute(\"controls\", \"none\");\n        this.sound.style.display = \"none\";\n        document.body.appendChild(this.sound);\n    }\n    \n    play() {\n        return this.sound.play();\n    }\n\n    stop() {\n        return this.sound.pause();\n    }\n}\n\n/* harmony default export */ __webpack_exports__[\"default\"] = (Sound);//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvanMvc291bmQuanM/YmM4YiJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRWUsb0VBQUsiLCJmaWxlIjoiLi9zcmMvanMvc291bmQuanMuanMiLCJzb3VyY2VzQ29udGVudCI6WyJjbGFzcyBTb3VuZCB7XG4gICAgY29uc3RydWN0b3Ioc3JjKSB7XG4gICAgICAgIHRoaXMuc291bmQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiYXVkaW9cIik7XG4gICAgICAgIHRoaXMuc291bmQuc3JjID0gc3JjO1xuICAgICAgICB0aGlzLnNvdW5kLnNldEF0dHJpYnV0ZShcInByZWxvYWRcIiwgXCJhdXRvXCIpO1xuICAgICAgICB0aGlzLnNvdW5kLnNldEF0dHJpYnV0ZShcImNvbnRyb2xzXCIsIFwibm9uZVwiKTtcbiAgICAgICAgdGhpcy5zb3VuZC5zdHlsZS5kaXNwbGF5ID0gXCJub25lXCI7XG4gICAgICAgIGRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQodGhpcy5zb3VuZCk7XG4gICAgfVxuICAgIFxuICAgIHBsYXkoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnNvdW5kLnBsYXkoKTtcbiAgICB9XG5cbiAgICBzdG9wKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5zb3VuZC5wYXVzZSgpO1xuICAgIH1cbn1cblxuZXhwb3J0IGRlZmF1bHQgU291bmQ7Il0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./src/js/sound.js\n");

/***/ }),

/***/ "./src/main.js":
/*!*********************!*\
  !*** ./src/main.js ***!
  \*********************/
/*! no exports provided */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _js_game__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./js/game */ \"./src/js/game.js\");\n\n\ndocument.addEventListener(\"DOMContentLoaded\", function () {\n    let canvas = document.getElementById(\"bubble-shooter-game\");\n    const ctx = canvas.getContext(\"2d\");\n    const game = new _js_game__WEBPACK_IMPORTED_MODULE_0__[\"default\"](ctx, canvas);\n    game.start();\n    \n    canvas.addEventListener(\"mousemove\", game.onMouseMove);\n    canvas.addEventListener(\"mousedown\", game.onMouseDown);\n    const instructions = document.getElementById('instructions');\n    const gamePlayBtn = document.getElementById('play');\n    if (instructions && gamePlayBtn) {\n        gamePlayBtn.onclick = () => {\n            instructions.style.display = 'none';\n            game.disabled = false;\n        }\n    }\n});//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvbWFpbi5qcz81NmQ3Il0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0FBQUE7QUFBNkI7O0FBRTdCO0FBQ0E7QUFDQTtBQUNBLHFCQUFxQixnREFBSTtBQUN6Qjs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLENBQUMiLCJmaWxlIjoiLi9zcmMvbWFpbi5qcy5qcyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBHYW1lIGZyb20gJy4vanMvZ2FtZSc7XG5cbmRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJET01Db250ZW50TG9hZGVkXCIsIGZ1bmN0aW9uICgpIHtcbiAgICBsZXQgY2FudmFzID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJidWJibGUtc2hvb3Rlci1nYW1lXCIpO1xuICAgIGNvbnN0IGN0eCA9IGNhbnZhcy5nZXRDb250ZXh0KFwiMmRcIik7XG4gICAgY29uc3QgZ2FtZSA9IG5ldyBHYW1lKGN0eCwgY2FudmFzKTtcbiAgICBnYW1lLnN0YXJ0KCk7XG4gICAgXG4gICAgY2FudmFzLmFkZEV2ZW50TGlzdGVuZXIoXCJtb3VzZW1vdmVcIiwgZ2FtZS5vbk1vdXNlTW92ZSk7XG4gICAgY2FudmFzLmFkZEV2ZW50TGlzdGVuZXIoXCJtb3VzZWRvd25cIiwgZ2FtZS5vbk1vdXNlRG93bik7XG4gICAgY29uc3QgaW5zdHJ1Y3Rpb25zID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2luc3RydWN0aW9ucycpO1xuICAgIGNvbnN0IGdhbWVQbGF5QnRuID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3BsYXknKTtcbiAgICBpZiAoaW5zdHJ1Y3Rpb25zICYmIGdhbWVQbGF5QnRuKSB7XG4gICAgICAgIGdhbWVQbGF5QnRuLm9uY2xpY2sgPSAoKSA9PiB7XG4gICAgICAgICAgICBpbnN0cnVjdGlvbnMuc3R5bGUuZGlzcGxheSA9ICdub25lJztcbiAgICAgICAgICAgIGdhbWUuZGlzYWJsZWQgPSBmYWxzZTtcbiAgICAgICAgfVxuICAgIH1cbn0pOyJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./src/main.js\n");

/***/ })

/******/ });